
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Changelog &#8212; Util 24.2.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/flasky.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="util-validator Guide" href="util-validator/index.html" />
   
  
  <link media="only screen and (max-device-width: 480px)" href="_static/small_flask.css" type= "text/css" rel="stylesheet" />
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-39101739-4', 'twitter.github.io');
    ga('send', 'pageview');

  </script>

  </head><body>
  
  

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="util-validator/index.html" title="util-validator Guide"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Util</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Changelog</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="changelog">
<h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h1>
<p>Below is a list of changes for each Util release.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">PHAB_ID=#</span></code> and <code class="docutils literal notranslate"><span class="pre">RB_ID=#</span></code> correspond to associated messages in commits.</p>
<section id="unreleased">
<h2>Unreleased<a class="headerlink" href="#unreleased" title="Permalink to this headline">¶</a></h2>
</section>
<section id="id1">
<h2>24.2.0<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<section id="runtime-behavior-changes">
<h3>Runtime Behavior Changes<a class="headerlink" href="#runtime-behavior-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: When the application exits due to an error on startup, the error and
and stack trace are printed to stderr in addition to the existing stdout. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D1116753</span></code></p></li>
</ul>
</section>
</section>
<section id="id2">
<h2>23.11.0<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<section id="id3">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util: Bump version of Jackson to 2.14.2. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D1049772</span></code></p></li>
<li><p>util: Bump version of Jackson to 2.14.3. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D1069160</span></code></p></li>
<li><p>util-securty: Add <cite>deserializeAndFilterOutInvalidCertificates</cite> Which wraps
the <cite>deserializeX509</cite> call in a Try. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D1107551</span></code></p></li>
</ul>
</section>
</section>
<section id="id4">
<h2>22.12.0<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<section id="new-features">
<h3>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Introduce Future.fromCompletableFuture <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D940686</span></code></p></li>
<li><p>util-core: Introduce <cite>Time.fromInstant</cite> <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D987464</span></code></p></li>
<li><p>util-core: Introduce <cite>TimeFormatter</cite>, a replacement for <cite>TimeFormat</cite>. <cite>TimeFormatter</cite> uses
the modern <cite>java.time.format.DateTimeFormatter</cite> API instead of the <cite>java.text.SimpleDateFormat</cite>
with the main advantage being that it doesn’t require synchronization on either formatting or
parsing, and is thus more performant and causes no contention. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D987464</span></code></p></li>
<li><p>util-stats: <cite>MetricBuilder</cite> now has API to configure a format in which histograms are exported.
Use <cite>.withHistogramFormat</cite> to access it.  <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D908189</span></code></p></li>
</ul>
</section>
<section id="deprecations">
<h3>Deprecations<a class="headerlink" href="#deprecations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>TimeFormat</cite>, as well as the <cite>Time.format</cite> methods are deprecated in favor of using
<cite>TimeFormatter</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D987464</span></code></p></li>
</ul>
</section>
<section id="id5">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util: Bump version of Jackson to 2.14.1. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D1025778</span></code></p></li>
<li><p>util-core: <cite>Time.at</cite>, <cite>Time.toString</cite>, and <cite>Time.fromRss</cite> now use <cite>TimeFormatter</cite> internally and
thus have better performance and do not cause contention through synchronization. <cite>toString</cite> always
uses <cite>TimeFormatter</cite> while <cite>at</cite> and <cite>fromRss</cite> only use it when run with Java 9 or later due to a
compatibility bug in Java 1.8. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D987464</span></code></p></li>
</ul>
</section>
</section>
<section id="id6">
<h2>22.7.0<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<section id="breaking-api-changes">
<h3>Breaking API Changes<a class="headerlink" href="#breaking-api-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-stats: SourceRole subtypes have been moved into the SourceRole object to make their
relationship to the parent type more clear. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D909744</span></code></p></li>
</ul>
</section>
<section id="id7">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-jackson: Update Jackson library to version 2.13.3 <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D906005</span></code></p></li>
<li><p>util-jackson: Deserialized case classes with validation on optional fields shouldn’t throw an error.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D915377</span></code></p></li>
<li><p>util: Update snakeyaml to 1.28 <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D930268</span></code></p></li>
</ul>
</section>
</section>
<section id="id8">
<h2>22.4.0<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<section id="id9">
<h3>Breaking API Changes<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-stats: The metric instantiation methods have been removed from <cite>MetricBuilder</cite>. Use the methods on
<cite>StatsReceiver</cite> to instantiate metrics instead. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D859036</span></code></p></li>
</ul>
</section>
</section>
<section id="id10">
<h2>22.3.0<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<section id="id11">
<h3>Deprecations<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-stats: Deprecated methods on <cite>MetricBuilder</cite> for directly instantiating metrics so that we can
eventually remove the <cite>statsReceiever</cite> field from <cite>MetricBuilder</cite> and let it just be the source of
truth for defining a metric. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D862244</span></code></p></li>
</ul>
</section>
</section>
<section id="id12">
<h2>22.2.0<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<section id="id13">
<h3>New Features<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Added <cite>Memoize.classValue</cite> as a Scala-friendly API for <cite>java.lang.ClassValue</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D825673</span></code></p></li>
<li><p>util-jvm: Register JVM expression including memory pool usages (including code cache, compressed class space,
eden space, sheap, metaspace, survivor space, and old gen) and open file descriptors count in StatsReceiver.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D820472</span></code></p></li>
<li><p>util-slf4j-jul-bridge: Add <cite>Slf4jBridge</cite> trait which can be mixed into extensions of <cite>c.t.app.App</cite> in
order to attempt installation of the <cite>SLF4JBridgeHandler</cite> via the <cite>Slf4jBridgeUtility</cite> in the constructor
of the <cite>c.t.app.App</cite> instance. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D827493</span></code></p></li>
</ul>
</section>
<section id="id14">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util: Bump version of Jackson to 2.13.2. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D848592</span></code></p></li>
<li><p>util-slf4j-api: Update the <cite>Logger</cite> API to include “call-by-name” method
variations akin to the <cite>Logging</cite> trait. When creating a <cite>Logger</cite> from a
Scala singleton object class, the resultant logger name will no longer include
the <cite>$</cite> suffix. Remove the deprecated <cite>Loggers</cite> object which is no longer
needed for Java compatibility as users can now directly use the <cite>Logger</cite>
apply functions with no additional ceremony. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D820252</span></code></p></li>
<li><p>util: Bump version of Caffeine to 2.9.3. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D815761</span></code></p></li>
</ul>
</section>
<section id="id15">
<h3>Breaking API Changes<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: The <cite>c.t.util.Responder</cite> trait has been removed. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D824830</span></code></p></li>
</ul>
</section>
</section>
<section id="id16">
<h2>22.1.0<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<section id="id17">
<h3>Breaking API Changes<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-jackson: The error message when failing to deserialize a character now correctly prints the non-character string. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D808049</span></code></p></li>
</ul>
</section>
<section id="id18">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util: Bump version of Jackson to 2.13.1. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D808049</span></code></p></li>
<li><p>util-core: Return suppressed exception information in Closable.sequence <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D809561</span></code></p></li>
</ul>
</section>
</section>
<section id="id19">
<h2>21.12.0<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h2>
<section id="id20">
<h3>Breaking API Changes<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>Activity.collect*</cite> and <cite>Var.collect*</cite> are now implemented in terms of known collection
type <cite>scala.collection.Seq</cite> versus HKT <cite>CC[X]</cite> before. This allows for certain performance
enhancements as well as makes it more aligned with the <cite>Future.collect</cite> APIs.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D795123</span></code></p></li>
</ul>
</section>
</section>
<section id="id21">
<h2>21.11.0<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h2>
<section id="id22">
<h3>Breaking API Changes<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-security: Use snakeyaml to parse yaml instead of a buggy custom yaml
parser. This means that thrown IOExceptions have been replaced by
YAMLExceptions. Additionally, the parser member has been limited to private visibility. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D617641</span></code></p></li>
</ul>
</section>
<section id="id23">
<h3>New Features<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-security: Any valid yaml / json file with string keys and values can
be loaded with <cite>com.twitter.util.security.Credentials</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D617641</span></code></p></li>
</ul>
</section>
<section id="id24">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-cache: Update Caffeine cache library to version 2.9.2 <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D771893</span></code></p></li>
<li><p>util-jackson: Enable <cite>BLOCK_UNSAFE_POLYMORPHIC_BASE_TYPES</cite> in ScalaObjectMapper to
guard against Remote Code Execution (RCE) security vulnerability. This blocks
polymorphic deserialization from unsafe base types. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D780863</span></code></p></li>
</ul>
</section>
</section>
<section id="id25">
<h2>21.10.0<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h2>
<section id="id26">
<h3>New Features<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Add convenience methods to convert to java.time.ZonedDateTime and
java.time.OffsetDateTime. <cite>toInstant</cite>, <cite>toZonedDateTime</cite>, and <cite>toOffsetDateTime</cite> also preserve
nanosecond resolution. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D757636</span></code></p></li>
<li><p>util-stats: Moved <cite>c.t.finagle.stats.LoadedStatsReceiver</cite> and <cite>c.t.finagle.stats.DefaultStatsReceiver</cite>
from the finagle-core module to util-stats.  <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D763497</span></code></p></li>
<li><p>util-jvm: Update exported metric schemas to properly reflect their underlying counter types
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D710019</span></code></p></li>
</ul>
</section>
</section>
<section id="id27">
<h2>21.9.0<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h2>
<section id="id28">
<h3>New Features<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-jvm: Experimentally crossbuilds with Scala 3. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D728602</span></code></p></li>
<li><p>util-stats: Counter, Gauge, and Stat can be instrumented with descriptions. <code class="docutils literal notranslate"><span class="pre">PHAB_ID</span> <span class="pre">=</span> <span class="pre">D615481</span></code></p></li>
<li><p>util-cache: Experimentally crossbuilds with Scala 3. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D714304</span></code>.</p></li>
<li><p>util-cache-guava: Experimentally crossbuilds with Scala 3. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D716101</span></code>.</p></li>
<li><p>util-routing: Experimentally crossbuilds with Scala 3. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D727120</span></code></p></li>
<li><p>util-sl4j-api: Experimentally crossbuilds with Scala 3. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D725491</span></code></p></li>
<li><p>util-sl4j-jul-bridge: Experimentally crossbuilds with Scala 3. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D726468</span></code></p></li>
<li><p>util-stats: Experimentally crossbuilds with Scala 3. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D720514</span></code></p></li>
<li><p>util-zk-test: Experimentally crossbuilds with Scala 3. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D720603</span></code></p></li>
<li><p>util-app: Flags parsing will now roll-up multiple flag parsing errors into a single
error message. When an error is encountered, flag parsing will continue to collect parse error
information instead of escaping on the first flag failure. After parsing all flags, if any errors
are present, a message containing all of the failed flags and their error reason,
along with the <cite>help</cite> usage message will be emitted. <code class="docutils literal notranslate"><span class="pre">`PHAB_ID=D729700</span></code></p></li>
</ul>
</section>
<section id="id29">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util: Bump version of Jackson to 2.11.4. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D727879</span></code></p></li>
<li><p>util: Bump version of json4s to 3.6.11. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D729764</span></code></p></li>
</ul>
</section>
<section id="id30">
<h3>Breaking API Changes<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: the <cite>c.t.app.App#flags</cite> field is now a <cite>final def</cite> instead of a <cite>val</cite> to address
<cite>override val</cite> scenarios where the <cite>c.t.app.App#flags</cite> are accessed as part of construction,
resulting in a NullPointerException due to access ordering issues.
The <cite>c.t.app.Flags</cite> class is now made final. The <cite>c.t.app.App#name</cite> field has changed from
a <cite>val</cite> and is now a <cite>def</cite>. A new <cite>c.t.app.App#includeGlobalFlags</cite> def has been exposed, which
defaults to <cite>true</cite>. The <cite>c.t.app#includeGlobalFlags</cite> def can be overridden to <cite>false</cite>
(ex: <cite>override protected def includeGlobalFlags: Boolean = false</cite>) in order to skip discovery
of <cite>GlobalFlag`s during flag parsing. ```PHAB_ID=D723956`</cite></p></li>
</ul>
</section>
</section>
<section id="no-21-7-0-release">
<h2>21.8.0 (No 21.7.0 Release)<a class="headerlink" href="#no-21-7-0-release" title="Permalink to this headline">¶</a></h2>
<section id="id31">
<h3>New Features<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-stats: add getAllExpressionsWithLabel utility to InMemoryStatsReceiver.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">PHAB_ID=D722942</span></code></p>
<ul class="simple">
<li><p>util-app: Experimentally crossbuilds with Scala 3. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D714780</span></code></p></li>
<li><p>util-app-lifecycle: Experimentally crossbuilds with Scala 3. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D716444</span></code></p></li>
<li><p>util-codec: Experimentally crossbuilds with Scala 3. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D715114</span></code></p></li>
<li><p>util-hashing: Experimentally crossbuilds with Scala 3. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D718914</span></code></p></li>
<li><p>util-lint: Experimentally crossbuilds with Scala 3. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D698954</span></code></p></li>
<li><p>util-registry: Experimentally crossbuilds with Scala 3. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D716019</span></code></p></li>
<li><p>util-thrift: Experimentally crossbuilds with Scala 3. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D715129</span></code></p></li>
<li><p>util-app: Introduce a new <cite>Command</cite> class which provides a <cite>Reader</cite> interface to the output
of a shell command. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D686134</span></code></p></li>
<li><p>util-core: Experimentally crossbuilds with Scala 3. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D694775</span></code></p></li>
</ul>
</section>
<section id="id32">
<h3>Breaking API Changes<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: Flags and GlobalFlag now use ClassTag instead of Manifest.  <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D714780</span></code></p></li>
<li><p>util-thrift: ThriftCodec now uses ClassTag instead of Manifest. In
scala3 Manifest is intended for use by the compiler and should not be used in
client code. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D715129</span></code></p></li>
<li><p>util-core (BREAKING): Remove <cite>AbstractSpool</cite>. Java users should use <cite>Spools</cite> static class or
the Spool companion object to create instances of <cite>Spool</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D694775</span></code></p></li>
</ul>
</section>
<section id="id33">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util: Update ScalaCheck to version 1.15.4 <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D691691</span></code></p></li>
<li><p>util-jackson: <cite>JsonDiff#toSortedString</cite> now includes null-type nodes, so that
<cite>JsonDiff.Result#toString</cite> shows differences in objects due to such nodes. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D707033</span></code></p></li>
</ul>
</section>
</section>
<section id="id34">
<h2>21.6.0<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h2>
<section id="id35">
<h3>New Features<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>util-core: Add <cite>ClasspathResource</cite>, a utility for loading classpath resources as an
optional <cite>InputStream</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D687324</span></code></p></li>
<li><p>util-jackson: Add <cite>com.twitter.util.jackson.YAML</cite> for YAML serde operations with a
default configured <cite>ScalaObjectMapper.</cite> Add more methods to <cite>com.twitter.util.jackson.JSON</cite>
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D687327</span></code></p></li>
<li><p>util-jackson: Introduce a new library for JSON serialization and deserialization based on the
Jackson integration in <a class="reference external" href="https://twitter.github.io/finatra/user-guide/json/index.html">Finatra</a>.</p>
<p>This includes a custom case class deserializer which “fails slow” to collect all mapping failures
for error reporting. This deserializer is also natively integrated with the util-validator library
to provide for performing case class validations during deserialization. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D664962</span></code></p>
</li>
</ul>
</section>
<section id="id36">
<h3>Breaking API Changes<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-stats: Removed MetricSchema trait (CounterSchema, GaugeSchema and HistogramSchema).
StatReceiver derived classes use MetricBuilder directly to create counters, gauges and stats.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D668739</span></code></p></li>
</ul>
</section>
<section id="id37">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-cache: Update Caffeine cache library to version 2.9.1 <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D660908</span></code></p></li>
</ul>
</section>
</section>
<section id="id38">
<h2>21.5.0<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h2>
<section id="id39">
<h3>New Features<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-validator: Introduce new library for case class validations (akin to Java bean validation)
which follows the Jakarta Bean Validation specification (<a class="reference external" href="https://beanvalidation.org/">https://beanvalidation.org/</a>) by wrapping
the Hibernate Validator library and thus supports <cite>jakarta.validation.Constraint</cite> annotations and
validators for annotating and validating fields of Scala case classes. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D638603</span></code></p></li>
<li><p>util-app: Introduce a Java-friendly API <cite>c.t.app.App#runOnExit(Runnable)</cite> and
<cite>c.t.app.App#runOnExitLast(Runnable)</cite> to allow Java 8 users to call <cite>c.t.app.App#runOnExit</cite>
and <cite>c.t.app.App#runOnExitLast</cite> with lambda expressions. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D511536</span></code></p></li>
</ul>
</section>
</section>
<section id="id40">
<h2>21.4.0<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h2>
<section id="id41">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-reflect: Memoize <cite>c.t.util.reflect.Types#isCaseClass</cite> computation. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D657748</span></code></p></li>
</ul>
</section>
<section id="id42">
<h3>Breaking API Changes<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-stats: Added a methods <cite>c.t.f.stats.Counter#metadata: Metadata</cite>,
<cite>c.t.f.stats.Stat#metadata: Metadata</cite>, and <cite>c.t.f.stats.Gauge#metadata:
Metadata</cite> to make it easier to introspect the constructed metric.  In
particular, this will enable constructing <cite>Expression`s based on the full name
of the metric.  If you don’t have access to a concrete `Metadata</cite> instance
(like <cite>MetricBuilder</cite>) for constructing a Counter, Stat, or Gauge, you can
instead supply <cite>NoMetadata</cite>.  <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D653751</span></code></p></li>
</ul>
</section>
<section id="id43">
<h3>New Features<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-stats: Added a <cite>com.twitter.finagle.stats.Metadata</cite> abstraction, that can
be either many <cite>com.twitter.finagle.stats.Metadata</cite>, a <cite>MetricBuilder</cite>, or a
<cite>NoMetadata</cite>, which is the null <cite>Metadata</cite>.  This enabled constructing
metadata for counters that represent multiple counters under the hood.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D653751</span></code></p></li>
</ul>
</section>
</section>
<section id="id44">
<h2>21.3.0<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h2>
<section id="id45">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util: Revert to scala version 2.12.12 due to <a class="reference external" href="https://github.com/scoverage/sbt-scoverage/issues/319">https://github.com/scoverage/sbt-scoverage/issues/319</a>
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D635917</span></code></p></li>
<li><p>util: Bump scala version to 2.12.13 <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D632567</span></code></p></li>
</ul>
</section>
<section id="id46">
<h3>Breaking API Changes<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util: Rename <cite>c.t.util.reflect.Annotations#annotationEquals</cite> to <cite>c.t.util.reflect.Annotations#equals</cite>
and <cite>c.t.util.reflect.Types.eq</cite> to <cite>c.t.util.reflect.Types.equals</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D640386</span></code></p></li>
<li><p>util: Builds are now only supported for Scala 2.12+ <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D631091</span></code></p></li>
<li><p>util-reflect: Remove deprecated <cite>c.t.util.reflect.Proxy</cite>. There is no library replacement.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D630143</span></code></p></li>
<li><p>util-security: Renamed <cite>com.twitter.util.security.PemFile</cite> to <cite>c.t.u.security.PemBytes</cite>, and
changed its constructor to accept a string and a name.  The main change here is that we assume
the PEM-encoded text has been fully buffered.  To migrate, please use the helper method on the
companion object, <cite>PemBytes#fromFile</cite>.  Note that unlike before with construction, we read from
the file, so it’s possible for it to throw.  <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D641088</span></code></p></li>
<li><p>util-security: Make KeyManager, TrustManager Factory helper methods public. The main change here
is that we expose util methods that are used to generate  TrustManagerFactory, KeyManagerFactory
inside <cite>c.t.u.security</cite> for public usage.  <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D644502</span></code></p></li>
</ul>
</section>
<section id="id47">
<h3>New Features<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-reflect: Add <cite>c.t.util.reflect.Annotations</cite> a utility for finding annotations on a class and
<cite>c.t.util.reflect.Classes</cite> which has a utility for obtaining the <cite>simpleName</cite> of a given class
across JDK versions and while handling mangled names (those with non-supported Java identifier
characters). Also add utilities to determine if a given class is a case class in
<cite>c.t.util.reflect.Types</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D638655</span></code></p></li>
<li><p>util-reflect: Add <cite>c.t.util.reflect.Types</cite>, a utility for some limited reflection based
operations. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D631819</span></code></p></li>
<li><p>util-core: <cite>c.t.io</cite> now supports creating and deconstructing unsigned 128-bit buffers
in Buf. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D606905</span></code></p></li>
<li><p>util-core: <cite>c.t.io.ProxyByteReader</cite> and <cite>c.t.io.ProxyByteWriter</cite> are now public. They are
useful for wrapping an existing <cite>ByteReader</cite> or <cite>ByteWriter</cite> and extending its functionality
without modifying the underlying instance. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D622705</span></code></p></li>
<li><p>util-core: Provided <cite>c.t.u.security.X509CertificateDeserializer</cite> to make it possible to directly
deserialize an <cite>X509Certificate</cite> even if you don’t have a file on disk. Also provided
<cite>c.t.u.security.X509TrustManagerFactory#buildTrustManager</cite> to make it possible to directly
construct an <cite>X509TrustManager</cite> with an <cite>X509Certificate</cite> instead of passing in a <cite>File</cite>.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D641088</span></code></p></li>
</ul>
</section>
</section>
<section id="id48">
<h2>21.2.0<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h2>
<p>No Changes</p>
</section>
<section id="id49">
<h2>21.1.0<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h2>
<p>No Changes</p>
</section>
<section id="id50">
<h2>20.12.0<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h2>
<section id="id51">
<h3>Breaking API Changes<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: removed <cite>com.twitter.util.Config.</cite> <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D580444</span></code></p></li>
<li><p>util-core: removed <cite>com.twitter.util.Future.isDone</cite> method. The semantics of this method
are surprising in that <cite>Future.exception(throwable).isDone == false</cite>. Replace usages with
<cite>Future.isDefined</cite> or <cite>Future.poll</cite> <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D585700</span></code></p></li>
<li><p>util-stats: Changed <cite>com.twitter.finagle.stats.MethodBuilder#withName</cite>,
<cite>com.twitter.finagle.stats.MethodBuilder#withRelativeName</cite>,
<cite>com.twitter.finagle.stats.MethodBuilder#withPercentiles</cite>,
<cite>com.twitter.finagle.stats.MethodBuilder#counter</cite>, and
<cite>com.twitter.finagle.stats.MethodBuilder#histogram</cite>, to accept varargs as parameters,
rather than a <cite>Seq</cite>.  Added a Java-friendly <cite>com.twitter.finagle.stats.MethodBuilder#gauge</cite>.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D620425</span></code></p></li>
</ul>
</section>
<section id="id52">
<h3>New Features<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>c.t.conversions</cite> now includes conversion methods for maps (under <cite>MapOps</cite>)
that were moved from Finatra. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D578819</span></code></p></li>
<li><p>util-core: <cite>c.t.conversions</cite> now includes conversion methods for tuples (under <cite>TupleOps</cite>)
that were moved from Finatra. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D578804</span></code></p></li>
<li><p>util-core: <cite>c.t.conversions</cite> now includes conversion methods for seqs (under <cite>SeqOps</cite>)
that were moved from Finatra. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D578605</span></code></p></li>
<li><p>util-core: <cite>c.t.conversions</cite> now includes conversion methods <cite>toOption</cite>, and <cite>getOrElse</cite>
under <cite>StringOps</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D578549</span></code></p></li>
<li><p>util-core: <cite>c.t.util.Duration</cite> now includes <cite>fromJava</cite> and <cite>asJava</cite> conversions to
<cite>java.time.Duration</cite> types. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D571885</span></code></p></li>
</ul>
</section>
<section id="id53">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>Activity.apply(Event)</cite> will now propagate registry events to the underlying
<cite>Event</cite> instead of registering once and deregistering on garbage collection.  This means
that if the underlying <cite>Event</cite> is “notified” while the derived <cite>Activity</cite> is not actively
being observed, it will not pick up the notification.  Furthermore, the derived <cite>Activity</cite>
will revert to the <cite>Activity.Pending</cite> state while it is not under observation. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D574843</span></code></p></li>
<li><p>util-core: <cite>Activity#stabilize</cite> will now propagate registry events to the underlying
<cite>Activity</cite> instead of registering once and deregistering on garbage collection.  This means
that if the underlying <cite>Activity</cite> is changed to a new state while the derived <cite>Activity</cite> is not actively
being observed, it will not update its own state.  The derived <cite>Activity</cite> will maintain its last
“stable” state when it’s next observed, unless the underlying <cite>Activity</cite> was updated to a new “stable”
state, in which case it will pick that up instead. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D574843</span></code></p></li>
<li><p>util-stats: <cite>c.t.finagle.stats.DenylistStatsReceiver</cite> now includes methods for creating
<cite>DenyListStatsReceiver</cite> from partial functions. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D576833</span></code></p></li>
<li><p>util-core: <cite>c.t.util.FuturePool</cite> now supports exporting the number of its pending tasks via
<cite>numPendingTasks</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D583030</span></code></p></li>
</ul>
</section>
</section>
<section id="id54">
<h2>20.10.0<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h2>
<section id="bug-fixes">
<h3>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-stat: <cite>MetricBuilder</cite> now uses a configurable metadataScopeSeparator to align
more closely with the metrics.json api. Services with an overridden scopeSeparator will
now see that reflected in metric_metadata.json where previously it was erroneously using
/ in all cases. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D557994</span></code></p></li>
<li><p>util-slf4j-api: Better Java interop. Deprecate <cite>c.t.util.logging.Loggers</cite> as Java users should be
able to use the <cite>c.t.util.logging.Logger</cite> companion object with less verbosity required.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D558605</span></code></p></li>
</ul>
</section>
</section>
<section id="id55">
<h2>20.9.0<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h2>
<section id="id56">
<h3>New Features<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: <cite>Seq</cite>/<cite>Tuple2</cite>/<cite>Map</cite> flags can now operate on booleans. For example,
<cite>Flag[Seq[Boolean]]</cite> now works as expected instead of throwing an assert exception (previous
behaviour). <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D549196</span></code></p></li>
</ul>
</section>
<section id="id57">
<h3>Breaking API Changes<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: <cite>Flaggable.mandatory</cite> now takes implicit <cite>ClassTag[T]</cite> as an argument. This is change is
source-compatible in Scala but requires Java users to pass argument explicitly via
<cite>ClassTag$.MODULE$.apply(clazz)</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D542135</span></code></p></li>
</ul>
</section>
<section id="id58">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util: Bump version of Jackson to 2.11.2. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D538440</span></code></p></li>
</ul>
</section>
</section>
<section id="id59">
<h2>20.8.1<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h2>
<section id="id60">
<h3>New Features<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-mock: Introduce <a class="reference external" href="https://github.com/mockito/mockito-scala">mockito-scala</a> based mocking
integration. Fix up and update mockito testing dependencies:
- <cite>mockito-all:1.10.19</cite> to <cite>mockito-core:3.3.3</cite>
- <cite>scalatestplus:mockito-1-10:3.1.0.0</cite> to <cite>scalatestplus:mockito-3-2:3.1.2.0</cite>  <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D530995</span></code></p></li>
<li><p>util-app: Add support for flags of Java Enum types. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D530205</span></code></p></li>
</ul>
</section>
</section>
<section id="do-not-use">
<h2>20.8.0 (DO NOT USE)<a class="headerlink" href="#do-not-use" title="Permalink to this headline">¶</a></h2>
<section id="id61">
<h3>New Features<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-stats: Store MetricSchemas in InMemoryStatsReceiver to enable further testing. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D518195</span></code></p></li>
<li><p>util-core: c.t.u.Var.Observer is now public. This allows scala users to extend the Var trait
as has been the case for Java users. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D520237</span></code></p></li>
<li><p>util-core: Added two new methods to c.t.u.Duration and c.t.u.Time: <cite>.fromHours</cite> and <cite>.fromDays</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D522734</span></code></p></li>
</ul>
</section>
<section id="id62">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: Treat empty strings as empty collections in <cite>Flag[Seq[_]]</cite>, <cite>Flag[Set[_]]</cite>,
<cite>Flag[java.util.List[_]]</cite>, and <cite>Flag[java.util.Set[_]]</cite>. They were treated as collections
with single element, empty string, before. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D516724</span></code></p></li>
</ul>
</section>
</section>
<section id="id63">
<h2>20.7.0<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h2>
<section id="id64">
<h3>New Features<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: Add ability to observe App lifecycle events. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D508145</span></code></p></li>
</ul>
</section>
</section>
<section id="id65">
<h2>20.6.0<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h2>
<section id="id66">
<h3>New Features<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-stats: Add two new Java-friendly methods to <cite>StatsReceiver</cite> (<cite>addGauge</cite> and <cite>provideGauge</cite>)
that take java.util.function.Supplier as well as list vararg argument last to enable better
developers’ experience. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D497885</span></code></p></li>
<li><p>util-app: Add a <cite>Flaggable</cite> instance for <cite>java.time.LocalTime</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D499606</span></code></p></li>
<li><p>util-app: Add two new methods to retrieve flag’s unparsed value (as string): <cite>Flag.getUnparsed</cite>
and <cite>Flag.getWithDefaultUnparsed</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D499628</span></code></p></li>
</ul>
</section>
</section>
<section id="id67">
<h2>20.5.0<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h2>
<section id="id68">
<h3>New Features<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h3>
<ul>
<li><dl class="simple">
<dt>util-security: Moved Credentials from util-core</dt><dd><p><cite>c.t.util.Credentials</cite> =&gt; <cite>c.t.util.security.Credentials</cite>.</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">PHAB_ID=D477984</span></code></p>
</li>
</ul>
</section>
<section id="id69">
<h3>Breaking API Changes<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h3>
<ul>
<li><dl class="simple">
<dt>util-core: Move Credentials to util-security</dt><dd><p><cite>c.t.util.Credentials</cite> =&gt; <cite>c.t.util.security.Credentials</cite>.</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">PHAB_ID=D477984</span></code></p>
</li>
<li><p>util-core: Change the namespace of <cite>ActivitySource</cite> and its derivatives to
<cite>com.twitter.io</cite> as its no longer considered experimental since the code has
changed minimally in the past 5 years. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D478498</span></code></p></li>
</ul>
</section>
</section>
<section id="id70">
<h2>20.4.1<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h2>
<section id="id71">
<h3>New Features<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-tunable: ConfigurationLinter accepts a relative path. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D468528</span></code></p></li>
</ul>
</section>
<section id="id72">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util: Bump jackson version to 2.11.0. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D457496</span></code></p></li>
</ul>
</section>
</section>
<section id="id73">
<h2>20.4.0 (DO NOT USE)<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h2>
<section id="id74">
<h3>New Features<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: When looking to add idempotent close behavior, users should mix in <cite>CloseOnce</cite> to
classes which already extend (or implement) <cite>Closable</cite>, as mixing in <cite>ClosableOnce</cite> leads to
compiler errors. <cite>ClosableOnce.of</cite> can still be used to create a <cite>ClosableOnce</cite> proxy of an
already instantiated <cite>Closable</cite>. Classes which do not extend <cite>Closable</cite> can still
mix in <cite>ClosableOnce</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D455819</span></code></p></li>
</ul>
</section>
<section id="id75">
<h3>Breaking API Changes<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h3>
<ul>
<li><dl class="simple">
<dt>util-hashing: Rename</dt><dd><p><cite>c.t.hashing.KetamaNode</cite> =&gt; <cite>HashNode</cite>,
<cite>c.t.hashing.KetamaDistributor</cite> =&gt; <cite>ConsistentHashingDistributor</cite>.</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">PHAB_ID=D449929</span></code></p>
</li>
</ul>
</section>
<section id="id76">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-stats: Provide CachedRegex, a function that filters a
Map[String, Number] =&gt; Map[String, Number] and caches which keys to filter on
based on a regex.  Useful for filtering down metrics in the style that Finagle
typically recommends <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D459391</span></code>.</p></li>
</ul>
</section>
</section>
<section id="id77">
<h2>20.3.0<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h2>
<section id="id78">
<h3>Breaking API Changes<a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: The system property <cite>com.twitter.util.UseLocalInInterruptible</cite> no longer
can be used to modulate which Local state is present when a Promise is interrupted.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D442444</span></code></p></li>
</ul>
</section>
<section id="id79">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Promises now exclusively use the state local to setting the interrupt
handler when raising on a Promise. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D442444</span></code></p></li>
</ul>
</section>
</section>
<section id="id80">
<h2>20.2.1<a class="headerlink" href="#id80" title="Permalink to this headline">¶</a></h2>
<section id="id81">
<h3>New Features<a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: Add <cite>c.t.util.app.App#onExitLast</cite> to be able to provide better Java
ergonomics for designating a final exit function. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D433874</span></code></p></li>
<li><p>util-core: Add <cite>c.t.io.Reader.concat</cite> to conveniently concatenate a collection
of Reader to a single Reader. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D434448</span></code></p></li>
</ul>
</section>
<section id="id82">
<h3>Breaking API Changes<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>Future.unapply</cite> has been removed. Use <cite>Future.poll</cite> to retrieve Future’s
state. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D427429</span></code></p></li>
</ul>
</section>
<section id="id83">
<h3>Bug Fixes<a class="headerlink" href="#id83" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-logging: Add a missing <cite>_*</cite> that could result in exceptions when using the
<cite>Logger.apply(Level, Throwable, String, Any*)</cite> signature. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D430122</span></code></p></li>
</ul>
</section>
</section>
<section id="id84">
<h2>20.1.0<a class="headerlink" href="#id84" title="Permalink to this headline">¶</a></h2>
<p>No Changes</p>
</section>
<section id="id85">
<h2>19.12.0<a class="headerlink" href="#id85" title="Permalink to this headline">¶</a></h2>
<section id="id86">
<h3>New Features<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-stats: Introduces <cite>c.t.f.stats.LazyStatsReceiver</cite> which ensures that counters and histograms
don’t export metrics until after they have been <cite>incr`ed or `add`ed at least once. ``PHAB_ID=D398898`</cite></p></li>
<li><p>util-core: Introduce <cite>Time#nowNanoPrecision</cite> to produce nanosecond resolution timestamps in JDK9
or later. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D400661</span></code></p></li>
<li><p>util-core: Introduce <cite>Future#toCompletableFuture</cite>, which derives a <cite>CompletableFuture</cite> from
a <cite>com.twitter.util.Future</cite> to make integrating with Java APIs simpler. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D408656</span></code></p></li>
</ul>
</section>
<section id="id87">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id87" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util: Upgrade to jackson 2.9.10 and jackson-databind 2.9.10.1 <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D410846</span></code></p></li>
</ul>
</section>
<section id="id88">
<h3>Breaking API Changes<a class="headerlink" href="#id88" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: The lightly used <cite>com.twitter.util.JavaSingleton</cite> trait has been removed. It
did not work as intended. Users should provide Java friendly objects, classes, and methods
instead. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D399947</span></code></p></li>
</ul>
</section>
<section id="id89">
<h3>Deprecations<a class="headerlink" href="#id89" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-test: The <cite>c.t.logging.TestLogging</cite> mixin has been deprecated. Users are encouraged to
move to slf4j for logging and minimize dependencies on <cite>com.twitter.logging</cite> in general, as
it is intended to be replaced entirely by slf4j. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D403574</span></code></p></li>
</ul>
</section>
<section id="id90">
<h3>Bug Fixes<a class="headerlink" href="#id90" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>Future#toJavaFuture</cite> incorrectly threw the exception responsible for failing it,
instead of a <cite>j.u.c.ExecutionException</cite> wrapping the exception responsible for failing it.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D408656</span></code></p></li>
</ul>
</section>
</section>
<section id="id91">
<h2>19.11.0<a class="headerlink" href="#id91" title="Permalink to this headline">¶</a></h2>
<section id="id92">
<h3>New Features<a class="headerlink" href="#id92" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util: Add initial support for JDK 11 compatibility. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D365075</span></code></p></li>
<li><p>util-core: Created public method Closable.stopCollectClosablesThread that stops CollectClosables</p></li>
</ul>
<p>thread. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D382800</span></code></p>
<ul class="simple">
<li><p>util-core: Introduced <cite>Reader.fromIterator</cite> to create a Reader from an iterator. It is not</p></li>
</ul>
<p>recommended to call <cite>iterator.next()</cite> after creating a <cite>Reader</cite> from it. Doing so will affect the
behavior of <cite>Reader.read()</cite> because it will skip the value returned from <cite>iterator.next</cite>.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D391769</span></code></p>
</section>
<section id="id93">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id93" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util: Upgrade to caffeine 2.8.0 <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D384592</span></code></p></li>
<li><p>util-jvm: Stop double-exporting <cite>postGC</cite> stats under both <cite>jvm</cite> and <cite>jvm/mem</cite>. These are now
only exported under <cite>jvm/mem/postGC</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D392230</span></code></p></li>
</ul>
</section>
<section id="id94">
<h3>Breaking API Changes<a class="headerlink" href="#id94" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-stats: abstract methods of StatsReceiver now take Schemas. The old APIs
are now final and cannot be overriden. For custom implementations, define
schema based methods (eg, counter(verbosity, name) is now
counter(CounterSchema)). NB: users can continue to call the old interface;
only implementors must migrate.``PHAB_ID=D385068``</p></li>
<li><p>util-core: Removed <cite>c.t.io.Pipe.copyMany</cite> (was <cite>Reader.copyMany</cite>). Use <cite>AsyncStream.foreachF</cite>
link to <cite>Pipe.copy</cite> for substitution. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D396590</span></code></p></li>
<li><p>util-core: Add <cite>c.t.io.BufReader.readAll</cite> to consume a <cite>Reader[Buf]</cite> and concat values to a Buf.
Replace <cite>c.t.io.Reader.readAll</cite> with <cite>Reader.readAllItems</cite>, the new API consumes a generic Reader[T],
and return a Seq of items. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D391346</span></code></p></li>
<li><p>util-core: Moved <cite>c.t.io.Reader.chunked</cite> to <cite>c.t.io.BufReader.chunked</cite>, and <cite>Reader.framed</cite> to
<cite>BufReader.framed</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D392198</span></code></p></li>
<li><p>util-core: Moved <cite>c.t.io.Reader.copy</cite> to <cite>c.t.io.Pipe.copy</cite>, and <cite>Reader.copyMany</cite> to
<cite>Pipe.copyMany</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D393650</span></code></p></li>
</ul>
</section>
<section id="id95">
<h3>Deprecations<a class="headerlink" href="#id95" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Mark <cite>c.t.io.BufReaders</cite>, <cite>c.t.io.Bufs</cite>, <cite>c.t.io.Readers</cite>, and <cite>c.t.io.Writers</cite> as
Deprecated. These classes will no longer be needed, and will be removed, after 2.11 support is
dropped. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D393913</span></code></p></li>
<li><p>util-stats: Removed deprecated methods <cite>stat0</cite> and <cite>counter0</cite> from <cite>StatsReceiver</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D393063</span></code></p></li>
</ul>
</section>
</section>
<section id="id96">
<h2>19.10.0<a class="headerlink" href="#id96" title="Permalink to this headline">¶</a></h2>
<section id="id97">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id97" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: When a computation from FuturePool is interrupted, its promise is
set to the interrupt, wrapped in a j.u.c.CancellationException. This wrapper
was introduced because, all interrupts were once CancellationExceptions. In
RB_ID=98612, this changed to allow the user to raise specific exceptions as
interrupts, and in the aid of compatibility, we wrapped this raised exception
in a CancellationException. This change removes the wrapper and fails the
promise directly with the raised exception. This will affect users that
explicitly handle CancellationException. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D371872</span></code></p></li>
</ul>
</section>
<section id="id98">
<h3>Bug Fixes<a class="headerlink" href="#id98" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Fixed bug in <cite>c.t.io.Reader.framed</cite> where if the <cite>framer</cite> didn’t emit a <cite>List</cite> the
emitted frames were skipped. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D378048</span></code></p></li>
<li><p>util-hashing: Fix a bug where <cite>partitionIdForHash</cite> was returning incosistent values w.r.t
<cite>entryForHash</cite> in <cite>KetamaDistributor</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D381128</span></code></p></li>
</ul>
</section>
</section>
<section id="id99">
<h2>19.9.0<a class="headerlink" href="#id99" title="Permalink to this headline">¶</a></h2>
<section id="id100">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id100" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: Better handling of exceptions when awaiting on the <cite>c.t.app.App</cite> to close at
the end of the main function. We <cite>Await.ready</cite> on <cite>this</cite> as the last step of
<cite>App#nonExitingMain</cite> which can potentially throw a <cite>TimeoutException</cite> which was previously
unhandled. We have updated the logic to ensure that <cite>TimeoutException`s are handled accordingly.
``PHAB_ID=D356846`</cite></p></li>
<li><p>util: Upgrade to Scala Collections Compat 2.1.2. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D364013</span></code></p></li>
</ul>
</section>
<section id="id101">
<h3>Breaking API Changes<a class="headerlink" href="#id101" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core:  BoundedStack is unused and really old code. Delete it. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D357338</span></code></p></li>
<li><p>util-logging: <cite>com.twitter.logging.ScribeHandler</cite> and <cite>com.twitter.logging.ScribeHandlers</cite> have
been removed. Users are encouraged to use slf4j for logging. However, if a util-logging integrated
ScribeHandler is still required, users can either build their own Finagle-based scribe client as
in <cite>ScribeRawZipkinTracer</cite> in finagle-zipkin-scribe, or copy the old <cite>ScribeHandler</cite>
implementation directly into their code. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D357008</span></code></p></li>
</ul>
</section>
</section>
<section id="id102">
<h2>19.8.1<a class="headerlink" href="#id102" title="Permalink to this headline">¶</a></h2>
<section id="id103">
<h3>New Features<a class="headerlink" href="#id103" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util: Enables cross-build for 2.13.0. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D333021</span></code></p></li>
</ul>
</section>
<section id="java-compatibility">
<h3>Java Compatibility<a class="headerlink" href="#java-compatibility" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-stats: In <cite>c.t.finagle.stats.AbstractStatsReceiver</cite>, the <cite>counter</cite>, <cite>stat</cite> and
<cite>addGauge</cite> become final, override <cite>counterImpl</cite>, <cite>statImpl</cite> and <cite>addGaugeImpl</cite> instead.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D333021</span></code></p></li>
<li><dl class="simple">
<dt>util-core:</dt><dd><p><cite>c.t.concurrent.Offer.choose</cite>,
<cite>c.t.concurrent.AsyncStream.apply</cite>,
<cite>c.t.util.Await.all</cite>,
<cite>c.t.util.Closable.sequence</cite> become available to java for passing varargs. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D333021</span></code></p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>util-stats:</dt><dd><p><cite>c.t.finagle.stats.StatsReceiver.provideGauge</cite> and <cite>addGauge</cite> become available to java for
passing varags. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D333021</span></code></p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id104">
<h3>Breaking API Changes<a class="headerlink" href="#id104" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: (not breaking) <cite>c.t.util.Future.join</cite> and <cite>c.t.util.Future.collect</cite> now take
<cite>Iterable[Future[A]]</cite> other than Seq. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D333021</span></code></p></li>
<li><p>util-core:  Revert the change above, in <cite>c.t.util.Future</cite>, <cite>collect</cite>, <cite>collectToTry</cite> and <cite>join</cite>
take <cite>scala.collection.Seq[Future[A]]</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D355403</span></code></p></li>
<li><p>util-core: <cite>com.twitter.util.Event#build</cite> now builds a Seq of events. <cite>Event#buildAny</cite> builds
against any collection of events. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D333021</span></code></p></li>
</ul>
</section>
</section>
<section id="id105">
<h2>19.8.0<a class="headerlink" href="#id105" title="Permalink to this headline">¶</a></h2>
<section id="id106">
<h3>Breaking API Changes<a class="headerlink" href="#id106" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-logging: The namespace forwarders for <cite>Level</cite> and <cite>Policy</cite> in <cite>com.twitter.logging.config</cite>
have been removed. Code should be updated to use <cite>com.twitter.logging.Level</cite> and
<cite>com.twitter.logging.Policy</cite> where necessary. Users are encouraged to use ‘util-slf4j-api’ though
where possible. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D344439</span></code></p></li>
<li><p>util-logging: The deprecated <cite>com.twitter.logging.config.LoggerConfig</cite> and associated
classes have been removed. These have been deprecated since 2012. Code should be updated
to use <cite>com.twitter.logging.LoggerFactory</cite> where necessary. Users are encouraged to use
‘util-slf4j-api’ though where possible. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D345381</span></code></p></li>
</ul>
</section>
<section id="id107">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id107" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util: Upgrade to Jackson 2.9.9. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D345969</span></code></p></li>
<li><p>util-app: It is now illegal to define GlobalFlags enclosed in package objects. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D353045</span></code></p></li>
</ul>
</section>
</section>
<section id="id108">
<h2>19.7.0<a class="headerlink" href="#id108" title="Permalink to this headline">¶</a></h2>
<section id="id109">
<h3>Breaking API Changes<a class="headerlink" href="#id109" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Removed deprecated <cite>c.t.concurrent.Scheduler</cite> methods <cite>usrTime</cite>,
<cite>cpuTime</cite>, and <cite>wallTime</cite>. These were deprecated in 2015 and have no
replacement. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D330386</span></code></p></li>
<li><p>util-core: Removed deprecated <cite>com.twitter.logging.config</cite> classes <cite>SyslogFormatterConfig</cite>,
<cite>ThrottledHandlerConfig</cite>, <cite>SyslogHandlerConfig</cite>. These were deprecated in 2012 and have
no replacement. Users are encouraged to use ‘util-slf4j-api’ where possible. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D339563</span></code></p></li>
</ul>
</section>
<section id="id110">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id110" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Remove experimental toggle <cite>com.twitter.util.BypassScheduler</cite> used
for speeding up <cite>ConstFuture.map</cite> (<cite>transformTry</cite>). Now, we always run map
operations immediately instead of via the Scheduler, where they may be queued
and potentially reordered. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D338487</span></code></p></li>
</ul>
</section>
</section>
<section id="id111">
<h2>19.6.0<a class="headerlink" href="#id111" title="Permalink to this headline">¶</a></h2>
<section id="id112">
<h3>Bug Fixes<a class="headerlink" href="#id112" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Fixed the behavior in <cite>c.t.io.Reader</cite> where reading from <cite>Reader#empty</cite> fails to return
a <cite>ReaderDiscardedException</cite> after it’s discarded. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D325465</span></code></p></li>
</ul>
</section>
<section id="id113">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id113" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Use Local at callback creation for Future’s interrupt handler rather than
raiser’s locals so that it is consistent with other callbacks. This functionality is
currently disabled and can be enabled by a toggle (com.twitter.util.UseLocalInInterruptible)
by setting it to 1.0 if you would like to try it out. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D324315</span></code></p></li>
</ul>
</section>
</section>
<section id="id114">
<h2>19.5.1<a class="headerlink" href="#id114" title="Permalink to this headline">¶</a></h2>
<p>No Changes</p>
</section>
<section id="id115">
<h2>19.5.0<a class="headerlink" href="#id115" title="Permalink to this headline">¶</a></h2>
<section id="id116">
<h3>New Features<a class="headerlink" href="#id116" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: Track the registration of duplicated Flag names. Currently, we print a warning to
<cite>stderr</cite> but do not track the duplicated Flag names. Tracking them allows us to inspect and
warn over the entire set. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D314410</span></code></p></li>
</ul>
</section>
</section>
<section id="id117">
<h2>19.4.0<a class="headerlink" href="#id117" title="Permalink to this headline">¶</a></h2>
<section id="id118">
<h3>New Features<a class="headerlink" href="#id118" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: Improve usage of <cite>Flag.let</cite> by providing a <cite>Flag.letParse</cite> method
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D288549</span></code></p></li>
</ul>
</section>
</section>
<section id="id119">
<h2>19.3.0<a class="headerlink" href="#id119" title="Permalink to this headline">¶</a></h2>
<section id="id120">
<h3>New Features<a class="headerlink" href="#id120" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Discard parent reader from <cite>Reader.flatten</cite> when child reader encounters an exception.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D281830</span></code></p></li>
<li><p>util-core: Added <cite>c.t.conversions.StringOps#toSnakeCase,toCamelCase,toPascalCase</cite> implementations.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D280886</span></code></p></li>
</ul>
</section>
</section>
<section id="id121">
<h2>19.2.0<a class="headerlink" href="#id121" title="Permalink to this headline">¶</a></h2>
<section id="id122">
<h3>New Features<a class="headerlink" href="#id122" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: updated <cite>Reader#fromFuture</cite> to resolve its <cite>onClose</cite> when reading of end-of-stream.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D269413</span></code></p></li>
<li><p>util-core: Added <cite>Reader.flatten</cite> to flatten a <cite>Reader[Reader[_]]</cite> to <cite>Reader[_]</cite>,
and <cite>Reader.fromSeq</cite> to create a new Reader from a Seq. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D255424</span></code></p></li>
<li><p>util-core: Added <cite>Duration.fromMinutes</cite> to return a <cite>Duration</cite> from a given number of minutes.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D259795</span></code></p></li>
<li><p>util-core: If given a <cite>Timer</cite> upon construction, <cite>c.t.io.Pipe</cite> will respect the close
deadline and wait the given amount of time for any pending writes to be read. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D229728</span></code></p></li>
<li><p>util-core: Optimized <cite>ConstFuture.proxyTo</cite> which brings the performance of
<cite>flatMap</cite> and <cite>transform</cite> of a <cite>ConstFuture</cite> in line with <cite>map</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D271358</span></code></p></li>
<li><p>util-core: Experimental toggle (com.twitter.util.BypassScheduler) for speeding up
<cite>ConstFuture.map</cite> (<cite>transformTry</cite>). The mechanism, when turned on, runs map operations
immediately (why not when we have a concrete value), instead of via the Scheduler, where it may
be queued and potentially reordered, e.g.:
<cite>f.flatMap { _ =&gt; println(1); g.map { _ =&gt; println(2) }; println(3) }</cite> will print <cite>1 2 3</cite>,
where it would have printed <cite>1 3 2</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D271962</span></code></p></li>
<li><p>util-security: <cite>Pkcs8KeyManagerFactory</cite> now supports a certificates file which contains multiple
certificates that are part of the same certificate chain. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D263190</span></code></p></li>
</ul>
</section>
<section id="id123">
<h3>Bug Fixes<a class="headerlink" href="#id123" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Fixed the behavior in <cite>c.t.io.Reader</cite> where <cite>Reader#flatMap</cite> fails to propagate
parent reader’s <cite>onClose</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D269413</span></code></p></li>
</ul>
</section>
<section id="id124">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id124" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Closing a <cite>c.t.io.Pipe</cite> will notify <cite>onClose</cite> when the deadline has passed whereas
before the pipe would wait indefinitely for a read before transitioning to the Closed state.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D229728</span></code></p></li>
</ul>
</section>
<section id="id125">
<h3>Breaking API Changes<a class="headerlink" href="#id125" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Remove <cite>c.t.u.CountDownLatch</cite> which is an extremely thin shim around
<cite>j.u.c.CountDownLatch</cite> that provides pretty limited value.  To migrate to <cite>j.u.c.CountDownLatch</cite>,
instead of <cite>c.t.u.CountDownLatch#await(Duration)</cite>, please use
<cite>j.u.c.CountDownLatch#await(int, TimeUnit)</cite>, and instead of
<cite>c.t.u.CountDownLatch#within(Duration)</cite>, please throw an exception yourself after awaiting.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D269404</span></code></p></li>
<li><p>util-core: Deprecated conversions in <cite>c.t.conversions</cite> have new implementations
that follow a naming scheme of <cite>SomethingOps</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D272206</span></code></p>
<ul>
<li><p><cite>percent</cite> is now <cite>PercentOps</cite></p></li>
<li><p><cite>storage</cite> is now <cite>StorageUnitOps</cite></p></li>
<li><p><cite>string</cite> is now <cite>StringOps</cite></p></li>
<li><p><cite>thread</cite> is now <cite>ThreadOps</cite></p></li>
<li><p><cite>time</cite> is now <cite>DurationOps</cite></p></li>
<li><p><cite>u64</cite> is now <cite>U64Ops</cite></p></li>
</ul>
</li>
<li><p>util-collection: Delete util-collection.  We deleted <cite>GenerationalQueue</cite>, <cite>MapToSetAdapter</cite>, and
<cite>ImmutableLRU</cite>, because we found that they were of little utility.  We deleted <cite>LruMap</cite> because it
was a very thin shim around a <cite>j.u.LinkedHashMap</cite>, where you override <cite>removeEldestEntry</cite>.  If you
need <cite>SynchronizedLruMap</cite>, you can wrap your <cite>LinkedHashMap</cite> with
<cite>j.u.Collection.synchronizedMap</cite>.  We moved <cite>RecordSchema</cite> into finagle-base-http because it was
basically only used for HTTP messages, so its new package name is <cite>c.t.f.http.collection</cite>.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D270548</span></code></p></li>
<li><p>util-core: Rename <cite>BlacklistStatsReceiver</cite> to <cite>DenylistStatsReceiver</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D270526</span></code></p></li>
<li><p>util-core: <cite>Buf.Composite</cite> is now private. Program against more generic, <cite>Buf</cite> interface instead.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D270916</span></code></p></li>
</ul>
</section>
</section>
<section id="id126">
<h2>19.1.0<a class="headerlink" href="#id126" title="Permalink to this headline">¶</a></h2>
<section id="id127">
<h3>New Features<a class="headerlink" href="#id127" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Added Reader.map/flatMap to transform Reader[A] to Reader[B]. Added <cite>fromFuture()</cite>
and <cite>value()</cite> in the Reader object to construct a new Reader. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D252165</span></code></p></li>
</ul>
</section>
<section id="id128">
<h3>Breaking API Changes<a class="headerlink" href="#id128" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: The implicit conversions classes in <cite>c.t.conversions.SomethingOps</cite> have been
renamed to have unique names. This allows them to be used together with wildcard imports.
See Github issue (<a class="reference external" href="https://github.com/twitter/util/issues/239">https://github.com/twitter/util/issues/239</a>). <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D252462</span></code></p></li>
<li><p>util-core: Both <cite>c.t.io.Writer.FailingWriter</cite> and <cite>c.t.io.Writer.fail</cite> were removed. Build your
own instance should you need to.  <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D256615</span></code></p></li>
</ul>
</section>
</section>
<section id="id129">
<h2>18.12.0<a class="headerlink" href="#id129" title="Permalink to this headline">¶</a></h2>
<section id="id130">
<h3>New Features<a class="headerlink" href="#id130" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Provide a way to listen for stream termination to <cite>c.t.util.Reader</cite>, <cite>Reader#onClose</cite>
which is satisfied when the stream is discarded or read until the end. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D236311</span></code></p></li>
<li><p>util-core: Conversions in <cite>c.t.conversions</cite> have new implementations
that follow a naming scheme of <cite>SomethingOps</cite>. Where possible the implementations
are <cite>AnyVal</cite> based avoiding allocations for the common usage pattern.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D249403</span></code></p>
<ul>
<li><p><cite>percent</cite> is now <cite>PercentOps</cite></p></li>
<li><p><cite>storage</cite> is now <cite>StorageUnitOps</cite></p></li>
<li><p><cite>string</cite> is now <cite>StringOps</cite></p></li>
<li><p><cite>thread</cite> is now <cite>ThreadOps</cite></p></li>
<li><p><cite>time</cite> is now <cite>DurationOps</cite></p></li>
<li><p><cite>u64</cite> is now <cite>U64Ops</cite></p></li>
</ul>
</li>
</ul>
</section>
<section id="id131">
<h3>Bug Fixes<a class="headerlink" href="#id131" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Fixed a bug where tail would sometimes return Some empty AsyncStream instead of None.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D241513</span></code></p></li>
</ul>
</section>
<section id="id132">
<h3>Deprecations<a class="headerlink" href="#id132" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Conversions in <cite>c.t.conversions</cite> have been deprecated in favor of <cite>SomethingOps</cite>
versions. Where possible the implementations are <cite>AnyVal</cite> based and use implicit classes
instead of implicit conversions. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D249403</span></code></p>
<ul>
<li><p><cite>percent</cite> is now <cite>PercentOps</cite></p></li>
<li><p><cite>storage</cite> is now <cite>StorageUnitOps</cite></p></li>
<li><p><cite>string</cite> is now <cite>StringOps</cite></p></li>
<li><p><cite>thread</cite> is now <cite>ThreadOps</cite></p></li>
<li><p><cite>time</cite> is now <cite>DurationOps</cite></p></li>
<li><p><cite>u64</cite> is now <cite>U64Ops</cite></p></li>
</ul>
</li>
</ul>
</section>
<section id="id133">
<h3>Breaking API Changes<a class="headerlink" href="#id133" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Experimental <cite>c.t.io.exp.MinThroughput</cite> utilities were removed.  <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D240944</span></code></p></li>
<li><p>util-core: Deleted <cite>c.t.io.Reader.Null</cite>, which was incompatible with <cite>Reader#onClose</cite> semantics.
<cite>c.t.io.Reader#empty[Nothing]</cite> is a drop-in replacement. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D236311</span></code></p></li>
<li><p>util-core: Removed <cite>c.t.util.U64</cite> bits. Use <cite>c.t.converters.u64._</cite> instead.  <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D244723</span></code></p></li>
</ul>
</section>
</section>
<section id="id134">
<h2>18.11.0<a class="headerlink" href="#id134" title="Permalink to this headline">¶</a></h2>
<section id="id135">
<h3>Breaking API Changes<a class="headerlink" href="#id135" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>c.t.u.Future.raiseWithin</cite> methods now take the timeout exception as a call-by-name
parameter instead of a strict exception. While Scala programs should compile as usual, Java
users will need to use a <cite>scala.Function0</cite> as the second parameter. The helper
<cite>c.t.u.Function.func0</cite> can be helpful. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D229559</span></code></p></li>
<li><p>util-core: Rename <cite>c.t.io.Reader.ReaderDiscarded</cite> to <cite>c.t.io.ReaderDiscardedException</cite>.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D231969</span></code></p></li>
</ul>
</section>
<section id="id136">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id136" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Made Stopwatch.timeNanos monotone. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D236629</span></code></p></li>
</ul>
</section>
</section>
<section id="id137">
<h2>18.10.0<a class="headerlink" href="#id137" title="Permalink to this headline">¶</a></h2>
<section id="id138">
<h3>Breaking API Changes<a class="headerlink" href="#id138" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>c.t.io.Reader.Writable</cite> and <cite>c.t.Reader.writable()</cite> are removed. Use <cite>c.t.io.Pipe</cite>
instead. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D226603</span></code></p></li>
<li><p>util-core: <cite>c.t.util.TempFolder</cite> has been moved to <cite>c.t.io.TempFolder</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D226940</span></code></p></li>
<li><p>util-core: Removed the forwarding types <cite>c.t.util.TimeConversions</cite> and
<cite>c.t.util.StorageUnitConversions</cite>. Use <cite>c.t.conversions.time</cite> and
<cite>c.t.conversions.storage</cite> directly. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D227363</span></code></p></li>
<li><p>util-core: <cite>c.t.concurrent.AsyncStream.fromReader</cite> has been moved to
<cite>c.t.io.Reader.toAsyncStream</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D228277</span></code></p></li>
<li><p>util-core: <cite>c.t.io.Reader.read()</cite> no longer takes <cite>n</cite>, the maximum number of bytes to read off a
stream.  <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D228385</span></code></p></li>
</ul>
</section>
<section id="id139">
<h3>New Features<a class="headerlink" href="#id139" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>c.t.io.Reader.fromBuf</cite> (<cite>BufReader</cite>), <cite>c.t.io.Reader.fromFile</cite>,
<cite>c.t.io.Reader.fromInputStream</cite> (<cite>InputStreamReader</cite>) now take an additional parameter,
<cite>chunkSize</cite>, the upper bound of the number of bytes that a given reader emits at each read.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D203154</span></code></p></li>
</ul>
</section>
<section id="id140">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id140" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>c.t.u.Duration.inTimeUnit</cite> can now return
<cite>j.u.c.TimeUnit.MINUTES</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D225115</span></code></p></li>
</ul>
</section>
</section>
<section id="id141">
<h2>18.9.1<a class="headerlink" href="#id141" title="Permalink to this headline">¶</a></h2>
<section id="id142">
<h3>Breaking API Changes<a class="headerlink" href="#id142" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>c.t.io.Writer</cite> now extends <cite>c.t.util.Closable</cite>. <cite>c.t.io.Writer.ClosableWriter</cite>
is no longer exist. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D218453</span></code></p></li>
<li><p>util-core: Add <cite>onClose</cite> into <cite>c.t.io.Writer</cite>, it exposes a <cite>Future</cite> that is satisfied when
the stream is closed. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D226319</span></code></p></li>
</ul>
</section>
<section id="id143">
<h3>Bug Fixes<a class="headerlink" href="#id143" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-slf4j-api: Moved slf4j-simple dependency to be a ‘test’ dependency, instead of a
compile dependency, which was inaccurate. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D220718</span></code></p></li>
</ul>
</section>
<section id="id144">
<h3>New Features<a class="headerlink" href="#id144" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Added a <cite>contramap</cite> function into <cite>c.t.io.Writer</cite>, <cite>Writer</cite> is now a contravariant
functor. Added the <cite>AbstractWriter</cite> for Java compatibility <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D225686</span></code></p></li>
</ul>
</section>
</section>
<section id="id145">
<h2>18.9.0<a class="headerlink" href="#id145" title="Permalink to this headline">¶</a></h2>
<section id="id146">
<h3>New Features<a class="headerlink" href="#id146" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-logging: New way to construct <cite>ScribeHandler</cite> for java interoperability.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D208928</span></code></p></li>
<li><p>util-core: Added Reader#fromAsyncStream for consuming an <cite>AsyncStream</cite> as a <cite>Reader</cite>.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D202334</span></code></p></li>
<li><p>util-core: Introducing <cite>Reader.chunked</cite> that chunks the output of a given reader.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D206676</span></code></p></li>
<li><p>util-core: Added Reader#framed for consuming data framed by a user supplied function.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D212396</span></code></p></li>
<li><p>util-security: Add <cite>NullSslSession</cite> related objects for use with non-existent
<cite>SSLSession`s.  ``PHAB_ID=D201421`</cite></p></li>
<li><p>util-tunable: Introducing <cite>Tunable.asVar</cite> that allows observing changes to tunables.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D211622</span></code></p></li>
</ul>
</section>
<section id="id147">
<h3>Breaking API Changes<a class="headerlink" href="#id147" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>util-core: <cite>c.t.io.Reader</cite> and <cite>c.t.io.Writer</cite> are now abstracted over the type
they produce/consume (<cite>Reader[A]</cite> and <cite>Writer[A]</cite>) and are no longer fixed to <cite>Buf</cite>.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D195638</span></code></p></li>
<li><p>util-core: <cite>InMemoryStatsReceiver</cite> now eagerly creates the mappings for <cite>Counters</cite>
and <cite>Stats</cite> instead of waiting for the first call to <cite>Counter.incr</cite> and <cite>Stat.add</cite>.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D205760</span></code></p></li>
<li><p>util-core: <cite>c.t.io.Reader.Writable</cite> is now <cite>c.t.io.Pipe</cite>. Both <cite>Writable</cite> type and
its factory method are deprecated; use <cite>new Pipe[A]</cite> instead.  <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D199536</span></code></p></li>
<li><p>util-slf4j-api: Ensure that marker information is used when determining if log
level is enabled for methods which support markers. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D202387</span></code></p></li>
<li><p>util-slfj4-api: Finalize the underlying logger def in the Logging trait as it is not
expected that this be overridable. If users wish to change how the underlying logger is
constructed they should simply use the Logger and its methods directly rather than
configuring the the underlying logger of the Logging trait.</p>
<p>Add better Java compatibility for constructing a Logger. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D204330</span></code></p>
</li>
</ul>
</section>
</section>
<section id="id148">
<h2>18.8.0<a class="headerlink" href="#id148" title="Permalink to this headline">¶</a></h2>
<section id="id149">
<h3>Bug Fixes<a class="headerlink" href="#id149" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Fixed an issue with Future.joinWith where it waits for
completion of both futures even if one has failed. This also affects
the join method, which is implemented in terms of joinWith. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D191342</span></code></p></li>
</ul>
</section>
</section>
<section id="id150">
<h2>18.7.0<a class="headerlink" href="#id150" title="Permalink to this headline">¶</a></h2>
<section id="id151">
<h3>Breaking API Changes<a class="headerlink" href="#id151" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Local.Context used to be a type alias for Array[Option[_]], now it is
a new key-value liked structure. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D182478</span></code></p></li>
</ul>
</section>
</section>
<section id="id152">
<h2>18.6.0<a class="headerlink" href="#id152" title="Permalink to this headline">¶</a></h2>
<section id="id153">
<h3>Breaking API Changes<a class="headerlink" href="#id153" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: Allow users a way to override the argument parsing behavior in
<cite>c.t.app.App#nonExitingMain</cite> which was inlined. Users can override <cite>parseArgs</cite>
to define custom behavior. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D181660</span></code></p></li>
<li><p>util-core: Removed <cite>c.t.u.NonFatal</cite>, use <cite>scala.util.control.NonFatal</cite>
instead. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D181918</span></code></p></li>
<li><p>util-class-preloader: This library has been removed since it deprecated. We
no longer recommend that people do this. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D174250</span></code></p></li>
</ul>
</section>
<section id="id154">
<h3>Bug Fixes<a class="headerlink" href="#id154" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: Fix issue where in some environments, <cite>URLClassLoader#getURLs</cite> can
return null, failing LoadService from initializing properly
(see: <a class="reference external" href="https://github.com/google/guava/issues/2239">https://github.com/google/guava/issues/2239</a>). The <cite>URLClassLoader</cite> javadoc
is not clear if a null can be returned when calling <cite>URLClassLoader#getURLs</cite> and for
at least one application server, the default returned is null, thus we should be more
resilient against this possibility. Fixes Finagle #695. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D181152</span></code></p></li>
</ul>
</section>
<section id="id155">
<h3>Deprecations<a class="headerlink" href="#id155" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-reflect: This library has been deprecated since it is legacy code and shouldn’t
be used for new services. We no longer think this facility is the right way to do it
and encourage you to provide your own forwarders. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D174250</span></code></p></li>
</ul>
</section>
<section id="id156">
<h3>New Features<a class="headerlink" href="#id156" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: added #suppressGracefulShutdownErrors method to optionally suppress exceptions
during graceful shutdown from bubbling up. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D176970</span></code></p></li>
</ul>
</section>
</section>
<section id="id157">
<h2>18.5.0<a class="headerlink" href="#id157" title="Permalink to this headline">¶</a></h2>
<section id="id158">
<h3>Bug Fixes<a class="headerlink" href="#id158" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>c.t.concurrent.AsyncSemaphore</cite> no longer completes promises while holding
its intrinsic lock. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D167434</span></code></p></li>
<li><p>util-logging: Fix incorrect <cite>loggerName</cite> in <cite>c.t.logging.ScribeHandler</cite> which
prevented the short-circuiting of publishing messages emitted from the ScribeHandler.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D161552</span></code></p></li>
<li><p>util-hashing: Add murmur3, a fast, non-cryptographic hashing function that
is missing from hashing.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D164915</span></code></p></li>
</ul>
</section>
</section>
<section id="id159">
<h2>18.4.0<a class="headerlink" href="#id159" title="Permalink to this headline">¶</a></h2>
<section id="id160">
<h3>New Features<a class="headerlink" href="#id160" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: Add the ability to bind specific implementations for <cite>LoadService.apply</cite>
via <cite>App.loadServiceBindings</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D146554</span></code></p></li>
<li><p>util-core: Introduce the <cite>ClosableOnce</cite> trait which extends the guarantees of
<cite>Closable</cite> to include idempotency of the <cite>close</cite> method. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D152000</span></code></p></li>
</ul>
</section>
<section id="id161">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id161" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>util-app: Add visibility for NonFatal exceptions during exiting of <cite>c.t.app.App</cite>.
Added visibility into any NonFatal exceptions which occur during the closing of
resources during <cite>App#close</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D146029</span></code></p></li>
<li><p>util-core: Ensure the <cite>Awaitable.CloseAwaitably0.closeAwaitably</cite> Future returns.
Because the <cite>closed</cite> AtomicBoolean is flipped, we want to make sure that executing
the passed in <cite>f</cite> function satisfies the <cite>onClose</cite> Promise even the cases of thrown
exceptions. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D146565</span></code></p></li>
<li><p>util-stats: Alphabetically sort stats printed to the given <cite>PrintStream</cite> in the
<cite>c.t.finagle.stats.InMemoryStatsReceiver#print(PrintStream)</cite> function.</p>
<p>To include stats headers which provide better visual separation for the different
types of stats being printedm, set <cite>includeHeaders</cite> to true. E.g.,
<code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">InMemoryStatsReceiver#print(PrintStream,</span> <span class="pre">includeHeaders</span> <span class="pre">=</span> <span class="pre">true)</span>
<span class="pre">`</span></code>
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D144091</span></code></p>
</li>
</ul>
</section>
</section>
<section id="id162">
<h2>18.3.0<a class="headerlink" href="#id162" title="Permalink to this headline">¶</a></h2>
<section id="id163">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id163" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: Ensure that any flag parsing error reason is written to <cite>System.err</cite>
before attempting to print flag usage. In the event that collecting flags for
the printing the usage message fails, users will still receive a useful message
as to why flag parsing failed. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D137629</span></code></p></li>
<li><p>util-core: Promises/Futures now use LIFO execution order for their callbacks
(was depth-based algorithm before).  <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D135407</span></code></p></li>
<li><p>util-core: Wrap the function passed to <cite>Closable.make</cite> in a try/catch and return
a <cite>Future.exception</cite> over any NonFatal exception. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D142086</span></code></p></li>
</ul>
</section>
<section id="id164">
<h3>Deprecations<a class="headerlink" href="#id164" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: RichU64* APIs are deprecated. Use Java 8 Unsigned Long API instead:
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D137893</span></code></p>
<ul>
<li><p><cite>new RichU64String(“123”).toU64Long</cite> -&gt; <cite>Long.parseUnsignedInt</cite></p></li>
<li><p><cite>new RichU64Long(123L).toU64HexString</cite> -&gt; <cite>Long.toHexString</cite> (no leading zeros)</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="id165">
<h2>18.2.0<a class="headerlink" href="#id165" title="Permalink to this headline">¶</a></h2>
<section id="id166">
<h3>New Features<a class="headerlink" href="#id166" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Added implicit conversion for percentage specified as “x.percent”
to a fractional Double in <cite>c.t.conversions.percent</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D128792</span></code></p></li>
<li><p>util-tunable: Add deserializer for <cite>c.t.u.StorageUnit</cite> to JsonTunableMapper
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D132368</span></code></p></li>
</ul>
</section>
<section id="id167">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id167" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: When <cite>c.t.a.App.exitOnError</cite> is called, it now gives <cite>close</cite>
an opportunity to clean up resources before exiting with an error.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D129437</span></code></p></li>
</ul>
</section>
</section>
<section id="id168">
<h2>18.1.0<a class="headerlink" href="#id168" title="Permalink to this headline">¶</a></h2>
<section id="id169">
<h3>New Features<a class="headerlink" href="#id169" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-security: Added <cite>c.t.util.security.X509CrlFile</cite> for reading
Certificate Revocation List PEM formatted <cite>X509CRL</cite> files.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D127700</span></code></p></li>
</ul>
</section>
</section>
<section id="id170">
<h2>17.12.0<a class="headerlink" href="#id170" title="Permalink to this headline">¶</a></h2>
<section id="id171">
<h3>Breaking API Changes<a class="headerlink" href="#id171" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-collection: <cite>c.t.util.SetMaker</cite> has been removed.
Direct usage of Guava is recommended if needed. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D116852</span></code></p></li>
</ul>
</section>
</section>
<section id="id172">
<h2>17.11.0<a class="headerlink" href="#id172" title="Permalink to this headline">¶</a></h2>
<section id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Guava has been removed as dependency from all modules except the
‘util-cache-guava’ module. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D117039</span></code></p></li>
</ul>
</section>
<section id="id173">
<h3>New Features<a class="headerlink" href="#id173" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-security: Added <cite>c.t.util.security.PrivateKeyFile</cite> for reading PKCS#8
PEM formatted <cite>PrivateKey</cite> files. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D105266</span></code></p></li>
</ul>
</section>
<section id="id174">
<h3>Bug Fixes<a class="headerlink" href="#id174" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>c.t.io.BufByteWriter.fixed(size).owned()</cite> will only represent bytes
explicitly written instead of the full size of the backing array, <cite>size</cite>.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D112938</span></code></p></li>
</ul>
</section>
<section id="id175">
<h3>Breaking API Changes<a class="headerlink" href="#id175" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-cache: The Guava dependency and its associated implementations have been
moved to a new module, ‘util-cache-guava’. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D117039</span></code></p></li>
<li><p>util-cache: <cite>c.t.cache.EvictingCache.lazily</cite> now takes a <cite>FutureCache</cite>
instead of an implementation specific cache. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D117039</span></code></p></li>
</ul>
</section>
</section>
<section id="id176">
<h2>17.10.0<a class="headerlink" href="#id176" title="Permalink to this headline">¶</a></h2>
<section id="release-version-changes">
<h3>Release Version Changes:<a class="headerlink" href="#release-version-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>From now on, release versions will be based on release date in the format of
YY.MM.x where x is a patch number. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D101244</span></code></p></li>
</ul>
</section>
<section id="id177">
<h3>New Features<a class="headerlink" href="#id177" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-intellij: Create util-intellij project and publish IntelliJ capture
points plugin for debugging asynchronous stack traces of code using Twitter
Futures in Scala 2.11.11. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D96782</span></code></p></li>
</ul>
</section>
<section id="id178">
<h3>Breaking API Changes<a class="headerlink" href="#id178" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: c.t.app.Flag.let and letClear are now generic in their return type.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D93951</span></code></p></li>
</ul>
</section>
<section id="id179">
<h3>Bug Fixes<a class="headerlink" href="#id179" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Fix Buf.ByteArray.Shared.apply(bytes,begin,end) constructor function.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D100648</span></code></p></li>
</ul>
</section>
<section id="id180">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id180" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: c.t.io.Buf.ByteArray.[Owned.Shared](Array[Byte], begin, end) now
validates its input arguments. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D100648</span></code></p></li>
<li><p>util-jvm: The <cite>jvm/mem/postGC/{poolName}/max</cite> metric has been removed
because it is the same as the <cite>jvm/mem/current/{poolName}/max</cite> metric.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D95291</span></code></p></li>
<li><p>util-security: Assert validity of X.509 certificates when read from a file.
Attempting to read a <cite>c.t.util.security.X509CeritificateFile</cite> will now assert
that the certificate is valid, i.e., if the current date and time are within
the validity period given in the certificate. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D88745</span></code></p></li>
</ul>
</section>
</section>
<section id="id181">
<h2>7.1.0  2017-09-06<a class="headerlink" href="#id181" title="Permalink to this headline">¶</a></h2>
<section id="id182">
<h3>Breaking API Changes<a class="headerlink" href="#id182" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-events: Module has been removed. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D82346</span></code></p></li>
<li><p>util-lint: Add GlobalRules#withRules for testing. Allow for the ability to
specify a global rules set for use in testing. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D83506</span></code></p></li>
</ul>
</section>
</section>
<section id="id183">
<h2>7.0.0  2017-08-15<a class="headerlink" href="#id183" title="Permalink to this headline">¶</a></h2>
<section id="id184">
<h3>New Features<a class="headerlink" href="#id184" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Added <cite>c.t.util.SlowProbeProxyTimer</cite> for monitoring the duration
of execution for timer tasks. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D70279</span></code></p></li>
<li><p>util-core: Introduced RootMonitor#set to set custom Monitor to RootMonitor.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D70876</span></code></p></li>
<li><p>util-jvm: <cite>JvmStats</cite> has been moved here from TwitterServer allowing broader
access to many metrics including GC, allocations, memory, and more.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D80883</span></code></p></li>
<li><p>util-stats: Introducing Verbosity Levels for StatsReceivers (see docs on <cite>StatsReceiver</cite>
for more info). <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D70112</span></code></p></li>
<li><p>util-tunable: <cite>c.t.u.tunable.Tunable</cite>, <cite>c.t.u.tunable.TunableMap</cite>,
<cite>c.t.u.tunable.JsonTunableMapper</cite>, and <cite>c.t.u.tunable.ServiceLoadedTunableMap</cite> are now public.
This allows users to create and use Tunables, a mechanism for accessing dynamically
configured values. See <a class="reference external" href="https://twitter.github.io/finagle/guide/Configuration.html#tunables">https://twitter.github.io/finagle/guide/Configuration.html#tunables</a>
for details on how these can be used in Finagle. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D80751</span></code>.</p></li>
</ul>
</section>
<section id="id185">
<h3>Bug Fixes<a class="headerlink" href="#id185" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Fix some consistency issues with <cite>c.t.util.ByteReaderImpl</cite>. Advance its
cursor by the number of bytes consumed via <cite>readBytes(Int)</cite>, not the number specified
as a method argument. <cite>readString</cite> will now throw an UnderflowException if the number
of bytes specified exceeds the remaining buffer length instead of silently making due
with the rest of the buffer’s contents. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D78301</span></code></p></li>
</ul>
</section>
<section id="id186">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id186" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>c.t.util.Closable.sequence</cite> now continues processing
the <cite>Closables</cite> should any of their closes result in a failed <cite>Future</cite>
and will return the first failure. Synchronous exceptions are now
handled by lifting them into failed <cite>Futures</cite>. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D62418</span></code></p></li>
<li><p>util-events: <cite>com.twitter.util.events.sinkEnabled</cite> now defaults to false
in preparation for removal in an upcoming release. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D64437</span></code></p></li>
</ul>
</section>
<section id="id187">
<h3>Breaking API Changes<a class="headerlink" href="#id187" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: ByteWriter has been transformed into a true trait which can now
be implemented outside of the com.twitter.io package. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D59996</span></code></p></li>
<li><p>util-core: The method ByteWriter.owned() has been moved to a sub trait,
BufByteWriter, to separate the notion of the target buffer representation from the
writer methods in order to make it easier to target different buffer representations.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D61215</span></code></p></li>
<li><p>util-stats: <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D59762</span></code></p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p><cite>ProxyStatsReceiver.self</cite> is now protected (was public before).</p></li>
<li><p><cite>StatsReceiver.repr</cite> is now <cite>def</cite> (was <cite>val</cite> before).</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>util-stats: <cite>Counter#add</cite> now takes a <cite>Long</cite> instead of an <cite>Integer</cite> as an argument.
<code class="docutils literal notranslate"><span class="pre">PHAB_ID=D69064</span></code></p></li>
<li><p>util-stats: <cite>StatsReceiver#counter</cite>, <cite>StatsReceiver#stat</cite>, and <cite>StatsReceiver.addGauge</cite>
now may optionally take <cite>c.t.f.stats.Verbosity</cite> as a first argument. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D70112</span></code></p></li>
</ul>
</section>
<section id="id188">
<h3>Deprecations<a class="headerlink" href="#id188" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-events: This module is deprecated and will be removed in an upcoming
release. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D64437</span></code></p></li>
<li><p>util-stats: <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D62611</span></code></p>
<ul>
<li><p><cite>StatsReceiver.counter0</cite> is deprecated in favour of vararg <cite>StatsReceiver.counter</cite></p></li>
<li><p><cite>StatsReceiver.stat0</cite> is deprecated in favour of vararg <cite>StatsReceiver.stat</cite></p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="id189">
<h2>6.45.0  2017-06-06<a class="headerlink" href="#id189" title="Permalink to this headline">¶</a></h2>
<section id="id190">
<h3>New Features<a class="headerlink" href="#id190" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: Optional resource shutdown sequencing for registered closables
via <cite>c.t.app.App#closeOnExitLast</cite>. See longer note there for usage.
<code class="docutils literal notranslate"><span class="pre">RB_ID=916120</span></code></p></li>
<li><p>util-core: Added <cite>writeBytes(Buf)</cite> to the ByteWriter abstract class to allow
for efficient writing of the <cite>c.t.io.Buf</cite> type. <code class="docutils literal notranslate"><span class="pre">RB_ID=917094</span></code></p></li>
<li><p>util-core: Added <cite>writeString(CharSequence, Charset)</cite> and readString(Int, Charset)`
to ByteWriter and ByteReader respectively to facilitate for more efficient String
encoding and decoding. <code class="docutils literal notranslate"><span class="pre">PHAB_ID=D63987</span></code></p></li>
<li><p>util-core: Added <cite>ByteReader.readUnsignedLongBE</cite> and <cite>ByteReader.readUnsignedLongLE</cite>.
<code class="docutils literal notranslate"><span class="pre">RB_ID=917289</span></code></p></li>
</ul>
</section>
<section id="id191">
<h3>Breaking API Changes<a class="headerlink" href="#id191" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>util-collection: Removed deprecated <cite>c.t.u.JMapWrapper</cite>. Use
<cite>scala.collection.JavaConverters</cite> instead. <code class="docutils literal notranslate"><span class="pre">RB_ID=915544</span></code></p></li>
<li><p>util-core: ByteReader extends the AutoClosable interface to provide
a notion of resource management. Users should ensure that instances
of the ByteReader interface are closed after they are no longer
needed. <code class="docutils literal notranslate"><span class="pre">RB_ID=916086</span></code></p></li>
<li><dl class="simple">
<dt>util-core: Removed deprecated methods from <cite>c.t.u.Future</cite>:</dt><dd><ul class="simple">
<li><p><cite>rawException</cite>; use <cite>exception</cite> instead</p></li>
<li><p><cite>cancel</cite>; use <cite>raise</cite> instead</p></li>
</ul>
</dd>
</dl>
<p>Removed deprecated <cite>c.t.u.Futures.select</cite>; use <cite>Future.select</cite> instead.
Remove deprecated <cite>flatten</cite> method on <cite>c.t.u.Future</cite>; use <cite>Futures.flatten</cite> instead.
<code class="docutils literal notranslate"><span class="pre">RB_ID=915500</span></code></p>
</li>
<li><p>util-core: Removed deprecated <cite>c.t.u.LongOverflowException</cite>. Use
<cite>java.lang.ArithmeticException</cite> instead. Removed deprecated
<cite>c.t.u.LongOverflowArith</cite> and all methods on it:
- <cite>add</cite>; use Java 8’s <cite>Math.addExact</cite> instead
- <cite>sub</cite>; use Java 8’s <cite>Math.subtractExact</cite> instead
- <cite>mul</cite>; use Java 8’s <cite>Math.multiplyExact</cite> instead
<code class="docutils literal notranslate"><span class="pre">RB_ID=915545</span></code></p></li>
<li><p>util-core: Removed deprecated <cite>c.t.concurrent.exp.AsyncStream</cite>. Use
<cite>c.t.concurrent.AsyncStream</cite> instead. <code class="docutils literal notranslate"><span class="pre">RB_ID=916422</span></code></p></li>
<li><p>util-eval: Removed from the project. <code class="docutils literal notranslate"><span class="pre">RB_ID=915430</span></code>
<a class="reference external" href="https://finagle.github.io/blog/2017/04/06/announce-removals/">https://finagle.github.io/blog/2017/04/06/announce-removals/</a></p></li>
</ul>
</section>
<section id="id192">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id192" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: All <cite>Timers</cite> now handle negative or undefined times/durations in uniform way:
treat them as zeros (i.e., <cite>Time.epoch</cite>, <cite>Duration.Zero</cite>). <code class="docutils literal notranslate"><span class="pre">RB_ID=916008</span></code></p></li>
</ul>
</section>
</section>
<section id="id193">
<h2>6.43.0  2017-04-20<a class="headerlink" href="#id193" title="Permalink to this headline">¶</a></h2>
<section id="id194">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id194" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>Closable.all(..)</cite> will now catch synchronous exceptions thrown
by any <cite>Closable.close(..)</cite> invocations, and wrap them in a failed Future.
<code class="docutils literal notranslate"><span class="pre">RB_ID=914859</span></code></p></li>
<li><p>util-stats: InMemoryStatsReceiver’s <cite>gauges</cite> member is now safe for
concurrent iteration but now holds strong references to gauge instances.
<code class="docutils literal notranslate"><span class="pre">RB_ID=911951</span></code></p></li>
</ul>
</section>
<section id="id195">
<h3>New Features<a class="headerlink" href="#id195" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>c.t.f.u.BufReader</cite> and <cite>c.t.f.u.BufWriter</cite> have been
moved from finagle-core to util-core and renamed to
<cite>c.t.io.ByteReader</cite> and <cite>c.t.io.ByteWriter</cite> respectively. They
are now also exposed publicly. <code class="docutils literal notranslate"><span class="pre">RB_ID=911639</span></code></p></li>
</ul>
</section>
<section id="id196">
<h3>Breaking API Changes<a class="headerlink" href="#id196" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util: util-zk-commons was removed, since it was only a connector between
util and commons, which was not widely used.  <code class="docutils literal notranslate"><span class="pre">RB_ID=910721</span></code></p></li>
<li><p>util-core: AsyncQueue’s <cite>size</cite> method is now final while <cite>offer</cite> and <cite>fail</cite>
are no longer final. <code class="docutils literal notranslate"><span class="pre">RB_ID=914191</span></code></p></li>
</ul>
</section>
</section>
<section id="id197">
<h2>6.42.0  2017-03-10<a class="headerlink" href="#id197" title="Permalink to this headline">¶</a></h2>
<section id="id198">
<h3>New Features<a class="headerlink" href="#id198" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Promoted the positional <cite>Buf.Indexed</cite> API to be a first-class
part of <cite>c.t.io.Buf</cite>. If you have a custom implementation of <cite>Buf</cite> it
will require some effort to become compatible. <code class="docutils literal notranslate"><span class="pre">RB_ID=907231</span></code></p></li>
</ul>
</section>
<section id="id199">
<h3>Breaking API Changes<a class="headerlink" href="#id199" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: Set failFastUntilParsed on created flag added to <cite>c.t.app.Flags</cite>
via <cite>c.t.app.Flags#add</cite>. <code class="docutils literal notranslate"><span class="pre">RB_ID=908804</span></code></p></li>
<li><p>util-core: Remove deprecated <cite>c.t.io.ConcatBuf</cite> which is replaced by
<cite>c.t.io.Buf.apply(Iterable[Buf])</cite>. <code class="docutils literal notranslate"><span class="pre">RB_ID=907180</span></code></p></li>
<li><p>util-core: Remove deprecated <cite>c.t.util.RingBuffer</cite>. Use Guava’s
<cite>EvictingQueue</cite>. <code class="docutils literal notranslate"><span class="pre">RB_ID=907516</span></code></p></li>
<li><p>util-core: Remove deprecated <cite>c.t.concurrent.ConcurrentPool</cite>. Prefer
Finagle’s <cite>c.t.f.pool.BufferingPool</cite>. <code class="docutils literal notranslate"><span class="pre">RB_ID=907516</span></code></p></li>
<li><p>util-core: Remove deprecated <cite>c.t.concurrent.ConcurrentMultiMap</cite>. Prefer
Guava’s Multimap. <code class="docutils literal notranslate"><span class="pre">RB_ID=907516</span></code></p></li>
</ul>
</section>
<section id="id200">
<h3>Dependencies<a class="headerlink" href="#id200" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util: Bump guava to 19.0. <code class="docutils literal notranslate"><span class="pre">RB_ID=907807</span></code></p></li>
</ul>
</section>
</section>
<section id="id201">
<h2>6.41.0  2017-02-03<a class="headerlink" href="#id201" title="Permalink to this headline">¶</a></h2>
<section id="id202">
<h3>New Features<a class="headerlink" href="#id202" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: App now exposes <cite>closeOnExit</cite> publicly. <code class="docutils literal notranslate"><span class="pre">RB_ID=906890</span></code></p></li>
<li><p>util-core: Add method to <cite>Buf</cite> to efficiently write to a nio <cite>ByteBuffer</cite>.
<code class="docutils literal notranslate"><span class="pre">RB_ID=910152</span></code></p></li>
<li><p>util-core: Add Java-friendly API to Scala.java for converting from
a Java 8 <cite>Optional</cite> to a Scala <cite>Option</cite>. <code class="docutils literal notranslate"><span class="pre">RB_ID=906512</span></code></p></li>
<li><p>util-core: Introduced a positional <cite>Buf</cite> API, <cite>Buf.Indexed</cite>, and retrofitted
all existing implementations in util and finagle to adopt it. It is now used
throughout for a reductions in allocation and latency. In two services at
Twitter we saw a 1-2% reduction in allocations. We plan to open the API to
the public and make it a part of <cite>Buf</cite> once we are confident in the APIs.
<code class="docutils literal notranslate"><span class="pre">RB_ID=904559</span></code> <code class="docutils literal notranslate"><span class="pre">RB_ID=905253</span></code> <code class="docutils literal notranslate"><span class="pre">RB_ID=906201</span></code></p></li>
<li><p>util-slf4j-api: Introduce slf4j-api support into util. This includes a
small scala wrapper over the <cite>org.slf4j.Logger</cite> and a scala-friendly
<cite>Logging</cite> trait. Changes also include the util-slf4j-jul-bridge module which
is a library that provides a utility to “smartly” install the
Slf4jBridgeHandler. <code class="docutils literal notranslate"><span class="pre">RB_ID=900815</span></code></p></li>
</ul>
</section>
<section id="id203">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id203" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Improved performance and allocation rates of some “random access”
<cite>Buf</cite> operations. <code class="docutils literal notranslate"><span class="pre">RB_ID=905253</span></code></p></li>
<li><p>util-core: Standardized argument checking in implementations of
<cite>c.t.io.Buf.write</cite> and <cite>c.t.io.Buf.slice</cite>. <code class="docutils literal notranslate"><span class="pre">RB_ID=899935</span></code></p></li>
</ul>
</section>
<section id="id204">
<h3>Breaking API Changes<a class="headerlink" href="#id204" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Deprecated <cite>c.t.io.ConcatBuf</cite> which is replaced by
<cite>c.t.io.Buf.apply(Iterable[Buf])</cite>. <code class="docutils literal notranslate"><span class="pre">RB_ID=899623</span></code></p></li>
</ul>
</section>
</section>
<section id="id205">
<h2>6.40.0  2016-12-20<a class="headerlink" href="#id205" title="Permalink to this headline">¶</a></h2>
<section id="id206">
<h3>Bug Fixes<a class="headerlink" href="#id206" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Fix issue with c.t.concurrent.AsyncStream.mapConcurrent which
will cause the stream head to be held for life of operation. <code class="docutils literal notranslate"><span class="pre">RB_ID=896168</span></code></p></li>
</ul>
</section>
<section id="id207">
<h3>Breaking API Changes<a class="headerlink" href="#id207" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Deprecated charset constants in <cite>c.t.io.Charsets</cite> have been
removed. Use java.nio.charset.StandardCharsets instead. <code class="docutils literal notranslate"><span class="pre">RB_ID=893542</span></code></p></li>
<li><p>util-core: <cite>com.twitter.util.NonFatal</cite> is deprecated, use
<cite>scala.util.control.NonFatal</cite> instead. <code class="docutils literal notranslate"><span class="pre">RB_ID=892475</span></code></p></li>
<li><p>util-core: <cite>FactoryPool</cite>/<cite>SimplePool</cite> now inherits <cite>scala.collection.mutable.Queue[A]</cite>
not deprecated <cite>scala.collection.mutable.QueueProxy[A]</cite> <code class="docutils literal notranslate"><span class="pre">RB_ID=896485</span></code></p></li>
<li><p>util-core: <cite>Buf</cite> has been promoted from a trait to an abstract class to facilitate
memoization of the <cite>Buf</cite> hash code. This also removes the need for the Java friendly
abstract class: <cite>AbstractBuf</cite>. <code class="docutils literal notranslate"><span class="pre">RB_ID=897476</span></code></p></li>
</ul>
</section>
</section>
<section id="id208">
<h2>6.39.0  2016-11-22<a class="headerlink" href="#id208" title="Permalink to this headline">¶</a></h2>
<p>No Changes</p>
</section>
<section id="id209">
<h2>6.38.0  2016-10-10<a class="headerlink" href="#id209" title="Permalink to this headline">¶</a></h2>
<section id="id210">
<h3>New Features<a class="headerlink" href="#id210" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: Java developers can now declare instances of <cite>GlobalFlag</cite>
from Java. See <cite>c.t.app.JavaGlobalFlag</cite> for details. <code class="docutils literal notranslate"><span class="pre">RB_ID=874073</span></code></p></li>
<li><p>util-thrift: We now depend on a fork of libthrift hosted in the Central Repository.
The new package lives in the ‘com.twitter’ organization. This removes the necessity of
depending on maven.twttr.com. This also means that eviction will not be automatic and
using a newer libthrift library requires manual eviction if artifacts are being pulled
in transitively. <code class="docutils literal notranslate"><span class="pre">RB_ID=885879</span></code></p></li>
<li><p>util-logging: Allow users to override <cite>c.t.util.logging.Logger</cite> installation,
making it easier to work with SLF4J bridges. <code class="docutils literal notranslate"><span class="pre">RB_ID=870684</span></code></p></li>
<li><p>util: No longer need to add an additional resolver that points to maven.twttr.com.
<code class="docutils literal notranslate"><span class="pre">RB_ID=878967</span></code></p></li>
</ul>
</section>
<section id="id211">
<h3>Bug Fixes<a class="headerlink" href="#id211" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>c.t.io.InputStreamReader</cite> and <cite>Readers</cite> created by
<cite>c.t.io.Reader.fromFile</cite> and <cite>fromStream</cite> now close the underlying
<cite>InputStream</cite> on reading of EOF and on calls to <cite>Reader.discard</cite>.
<code class="docutils literal notranslate"><span class="pre">RB_ID=873319</span></code></p></li>
</ul>
</section>
<section id="id212">
<h3>Breaking API Changes<a class="headerlink" href="#id212" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>c.t.app.GlobalFlag</cite> is now <cite>abstract</cite> to reflect how the class
is intended to be used. <code class="docutils literal notranslate"><span class="pre">RB_ID=875409</span></code></p></li>
</ul>
</section>
</section>
<section id="id213">
<h2>6.37.0  2016-09-07<a class="headerlink" href="#id213" title="Permalink to this headline">¶</a></h2>
<section id="id214">
<h3>New Features<a class="headerlink" href="#id214" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: Introduce <cite>c.t.app.Flag.letClear</cite> allowing flags to be unset.
<code class="docutils literal notranslate"><span class="pre">RB_ID=868177</span></code></p></li>
</ul>
</section>
</section>
<section id="id215">
<h2>6.36.0  2016-08-25<a class="headerlink" href="#id215" title="Permalink to this headline">¶</a></h2>
<section id="id216">
<h3>New Features<a class="headerlink" href="#id216" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>c.t.util.FuturePool</cite> now optionally exposes metrics on
their internal state such as active tasks, and completed tasks.
<code class="docutils literal notranslate"><span class="pre">RB_ID=850652</span></code></p></li>
<li><p>util-core: Add a system property
<cite>com.twitter.concurrent.schedulerSampleBlockingFraction</cite> that can be
set to a value between 0.0 and 1.0 (inclusive). When the Scheduler
runs blocking code, it will log the stacktrace for that fraction of
the calls. <code class="docutils literal notranslate"><span class="pre">RB_ID=861892</span></code></p></li>
<li><p>util-core: Add Java-friendly API for <cite>StorageUnit</cite>. See <cite>StorageUnit.fromX</cite>
and <cite>StorageUnit.{times, plus, minus, divide}</cite> methods. <code class="docutils literal notranslate"><span class="pre">RB_ID=864546</span></code></p></li>
</ul>
</section>
<section id="id217">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id217" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-eval: The compiler reporter is now reset between code check invocations.
This means that when there is a failure that it is no longer required to reset
the entire state to recover and that already compiled and loaded classes can still
be used. <code class="docutils literal notranslate"><span class="pre">RB_ID=859878</span></code></p></li>
</ul>
</section>
</section>
<section id="id218">
<h2>6.35.0  2016-07-07<a class="headerlink" href="#id218" title="Permalink to this headline">¶</a></h2>
<section id="id219">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id219" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-codec: StringEncoder no longer depends on apache commons-codec, and
decode will now throw an exception when it fails to decode a byte, instead
of failing silently. <code class="docutils literal notranslate"><span class="pre">RB_ID=833478</span></code></p></li>
<li><p>util-collection: LruMap is now backed by jdk LinkedHashMap instead of apache
collections LRUMap. <code class="docutils literal notranslate"><span class="pre">RB_ID=833515</span></code></p></li>
<li><p>util-core: <cite>com.twitter.util.NonFatal</cite> is now implemented by Scala’s
<cite>scala.util.control.NonFatal</cite>. This changes behavior such that
<cite>java.lang.StackOverflowError</cite> is considered fatal and
<cite>java.lang.NoSuchMethodException</cite> is considered non-fatal.
<code class="docutils literal notranslate"><span class="pre">RB_ID=835671</span></code></p></li>
</ul>
</section>
<section id="id220">
<h3>New Features<a class="headerlink" href="#id220" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: <cite>com.twitter.finagle.util.LoadService</cite> has been moved to
<cite>c.t.app.LoadService</cite> and can now be used without needing a finagle-core
dependency. <code class="docutils literal notranslate"><span class="pre">RB_ID=829897</span></code></p></li>
<li><p>util-cache: Adds support for Caffeine-style caches. <code class="docutils literal notranslate"><span class="pre">RB_ID=833848</span></code></p></li>
<li><p>util-core: Add <cite>c.t.concurrent.Scheduler.blockingTimeNanos</cite> which tracks time spent doing
blocking operations. <code class="docutils literal notranslate"><span class="pre">RB_ID=828289</span></code></p></li>
<li><p>util-core: Reduced allocations by 40% and latency by 18% of satisfying <cite>Promises</cite>.
<code class="docutils literal notranslate"><span class="pre">RB_ID=832816</span></code></p></li>
<li><p>util-core: <cite>c.t.util.NoStacktrace</cite> is removed. Use <cite>scala.util.control.NoStackTrace</cite> instead.
<code class="docutils literal notranslate"><span class="pre">RB_ID=833188</span></code></p></li>
<li><p>util-core: Add <cite>Future.joinWith</cite> that also accepts a function <cite>(A, B) =&gt; C</cite> for mapping
a joined result. <code class="docutils literal notranslate"><span class="pre">RB_ID=838169</span></code></p></li>
<li><p>util-core: Add <cite>Future.by(Time)</cite>, complementary to the existing <cite>Future.within(Duration)</cite>
<code class="docutils literal notranslate"><span class="pre">RB_ID=838169</span></code></p></li>
<li><p>util-core: Add <cite>c.t.util.ProxyTimer</cite> which allows for creating proxy based
<cite>Timers</cite> outside of the <cite>com.twitter.util</cite> package. <code class="docutils literal notranslate"><span class="pre">RB_ID=846194</span></code></p></li>
<li><p>util-core: Add <cite>AsyncStream.merge</cite> merge potentially inifite streams
<code class="docutils literal notranslate"><span class="pre">RB_ID=846681</span></code></p></li>
<li><p>util-security: Added new project. <code class="docutils literal notranslate"><span class="pre">RB_ID=843070</span></code></p></li>
</ul>
</section>
<section id="id221">
<h3>Breaking API Changes<a class="headerlink" href="#id221" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Builds are now only for Java 8 and Scala 2.11. See the
<a class="reference external" href="https://finagle.github.io/blog/2016/04/20/scala-210-and-java7/">blog post</a>
for details. <code class="docutils literal notranslate"><span class="pre">RB_ID=828898</span></code></p></li>
<li><p>util-core: <cite>c.t.u.Bijection</cite> is removed. use <cite>c.t.bijection.Bijection</cite>
(<a class="reference external" href="https://github.com/twitter/bijection">https://github.com/twitter/bijection</a>) instead. <code class="docutils literal notranslate"><span class="pre">RB_ID=834383</span></code></p></li>
<li><p>util-core: Deprecated method <cite>Future.get()</cite> has been removed because it made it
too easy to hide blocking code. Replaced usage with the more explicit
<cite>com.twitter.util.Await.result(Future)</cite>. <code class="docutils literal notranslate"><span class="pre">RB_ID=833579</span></code></p></li>
<li><p>util-core: Deprecated method <cite>Future.get(Duration): Try</cite> has been removed because it
made it too easy to hide blocking code. Replaced usage with the more explicit
<cite>com.twitter.util.Await.result(Future.liftToTry)</cite>. <code class="docutils literal notranslate"><span class="pre">RB_ID=836066</span></code></p></li>
<li><p>util-core: Deprecated methods <cite>Future.isReturn</cite> and <cite>Future.isThrow</cite> have been
removed because they made it too easy to hide blocking code. Replaced usage with
the more explicit <cite>Await.result(Future.liftToTry).isReturn</cite> and
<cite>Await.result(Future.liftToTry).isThrow</cite>. <code class="docutils literal notranslate"><span class="pre">RB_ID=837329</span></code></p></li>
<li><p>util-lint: Added methods <cite>com.twitter.util.lint.Rules.removeById(String)</cite> and
<cite>com.twitter.util.lint.RulesImpl.removeById(String)</cite> so that it is now possible
to remove a <cite>com.twitter.util.lint.Rule</cite> from the <cite>com.twitter.util.lint.GlobalRules</cite>
set. <code class="docutils literal notranslate"><span class="pre">RB_ID=840753</span></code></p></li>
</ul>
</section>
<section id="id222">
<h3>Bug Fixes<a class="headerlink" href="#id222" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: AsyncMeter had a bug where if the burst size was smaller than
the number of disbursed tokens, it would discard all of the tokens over
the disbursal limit.  Changed to instead process tokens in the wait queue
with leftover tokens.  This improves behavior where the actual period is
smaller than can actually be simulated with the given timer.  <code class="docutils literal notranslate"><span class="pre">RB_ID=836742</span></code></p></li>
<li><p>util-core: Once didn’t actually provide the guarantee it tried to, because
of an issue with the scala compiler,
<a class="reference external" href="https://issues.scala-lang.org/browse/SI-9814">https://issues.scala-lang.org/browse/SI-9814</a>.  It should now actually be
synchronized. <code class="docutils literal notranslate"><span class="pre">RB_ID=842245</span></code></p></li>
<li><p>util-zk: Fixed race when an existing permit is released between the time
the list was gotten and the data was checked. <code class="docutils literal notranslate"><span class="pre">RB_ID=835856</span></code></p></li>
<li><p>util-core: Memoize apply now throws IllegalStateException if a thread
re-enters with identical input parameters instead of deadlocking.</p></li>
</ul>
</section>
</section>
<section id="id223">
<h2>6.34.0  2016-04-26<a class="headerlink" href="#id223" title="Permalink to this headline">¶</a></h2>
<section id="id224">
<h3>New Features<a class="headerlink" href="#id224" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Add <cite>Throwables.unchecked</cite> to help Java users deal with checked
exceptions. <code class="docutils literal notranslate"><span class="pre">RB_ID=811441</span></code></p></li>
<li><p>util-stats: Can now get from a <cite>com.twitter.finagle.stats.StatsReceiver`</cite> to all “leaf”
StatsReceivers that don’t delegate to another StatsReceiver with
<cite>com.twitter.finagle.stats.DelegatingStatsReceiver.all</cite>.  <code class="docutils literal notranslate"><span class="pre">RB_ID=819519</span></code></p></li>
</ul>
</section>
<section id="id225">
<h3>Breaking API Changes<a class="headerlink" href="#id225" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Removed deprecated methods from Buf.scala <code class="docutils literal notranslate"><span class="pre">RB_ID=809948</span></code>
- Removed <cite>c.t.io.Buf.ByteArray.apply</cite>, replace usage with <cite>Buf.ByteArray.Owned.apply</cite>.
- Removed <cite>c.t.io.Buf.ByteArray.unapply</cite>, replace usage with <cite>Buf.ByteArray.Owned.unapply</cite>.
- Removed <cite>c.t.io.Buf.ByteBuffer.apply</cite>, replace usage with <cite>Buf.ByteBuffer.Owned.apply</cite>.
- Removed <cite>c.t.io.Buf.toByteBuffer</cite>, replace usage with <cite>Buf.ByteBuffer.Owned.extract</cite>.</p></li>
<li><p>util-core: Removed deprecated <cite>Future.apply</cite> methods <code class="docutils literal notranslate"><span class="pre">RB_ID=811617</span></code></p></li>
<li><p>util-stats: Removed <cite>com.twitter.finagle.stats.BroadcastStatsReceiver</cite> marker trait in favor of
<cite>com.twiter.finagle.stats.DelegatingStatsReceiver</cite> marker trait, which lets us specify that we
only delegate to a single <cite>com.twitter.finagle.stats.StatsReceiver</cite>.  <code class="docutils literal notranslate"><span class="pre">RB_ID=819519</span></code></p></li>
<li><p>util-zk-common: Removed <cite>com.twitter.zk.ServerSet</cite>. Use implementations of ServerSets in the
finagle-serversets project. <code class="docutils literal notranslate"><span class="pre">RB_ID=821355</span></code></p></li>
</ul>
</section>
<section id="id226">
<h3>Bug Fixes<a class="headerlink" href="#id226" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Fix memory leak in <cite>Var.apply(T, Event[T])</cite> and <cite>Var.patch</cite>.
<code class="docutils literal notranslate"><span class="pre">RB_ID=809100</span></code></p></li>
</ul>
</section>
</section>
<section id="id227">
<h2>6.33.0  2016-03-10<a class="headerlink" href="#id227" title="Permalink to this headline">¶</a></h2>
<section id="id228">
<h3>New Features<a class="headerlink" href="#id228" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: AsyncSemaphore supports closing and draining of waiters via <cite>fail</cite>. <code class="docutils literal notranslate"><span class="pre">RB_ID=807590</span></code></p></li>
<li><p>util-core: Add convenience methods <cite>force</cite>, <cite>size</cite>, <cite>sum</cite>, and <cite>withEffect</cite> to <cite>AsyncStream</cite>.
<code class="docutils literal notranslate"><span class="pre">RB_ID=808411</span></code></p></li>
</ul>
</section>
<section id="id229">
<h3>Bug Fixes<a class="headerlink" href="#id229" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Fix nested functions <cite>AsyncStream.++</cite> to avoid stack overflow. <code class="docutils literal notranslate"><span class="pre">RB_ID=804408</span></code></p></li>
</ul>
</section>
<section id="id230">
<h3>Deprecations<a class="headerlink" href="#id230" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>Future.rawException</cite> is deprecated in favor of <cite>Future.exception</cite>.
<code class="docutils literal notranslate"><span class="pre">RB_ID=798223</span></code></p></li>
</ul>
</section>
</section>
<section id="id231">
<h2>6.32.0  2016-02-03<a class="headerlink" href="#id231" title="Permalink to this headline">¶</a></h2>
<section id="id232">
<h3>New Features<a class="headerlink" href="#id232" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Add <cite>Future.traverseSequentially</cite>. Take a sequence and sequentially apply a function
A =&gt; Future[B] to each item. <code class="docutils literal notranslate"><span class="pre">RB_ID=785091</span></code></p></li>
</ul>
</section>
</section>
<section id="id233">
<h2>6.31.0  2016-02-02<a class="headerlink" href="#id233" title="Permalink to this headline">¶</a></h2>
<p>NOT RELEASED</p>
</section>
<section id="id234">
<h2>6.30.0  2015-12-03<a class="headerlink" href="#id234" title="Permalink to this headline">¶</a></h2>
<section id="id235">
<h3>New Features<a class="headerlink" href="#id235" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Introduce an <cite>AsyncMeter</cite> for asynchronously rate limiting to a fixed rate over time.
It can be used for smoothing out bursty traffic, or for slowing down access to a
resource. <code class="docutils literal notranslate"><span class="pre">RB_ID=756333</span></code></p></li>
<li><p>util-core: Introduce a <cite>TokenBucket</cite> for helping to control the relative rates of two processes,
or for smoothing out the rate of a single process. <code class="docutils literal notranslate"><span class="pre">RB_ID=756333</span></code></p></li>
</ul>
</section>
<section id="id236">
<h3>Breaking API Changes<a class="headerlink" href="#id236" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>Timer</cite> now has final implementations for <cite>schedule</cite> which delegate
to new protected <cite>scheduleOnce</cite> and <cite>schedulePeriodically</cite> methods. This is
done to ensure that <cite>Locals</cite> are captured when the task is scheduled and
then used when the task is run. Existing <cite>Timer</cite> implementations should rename
their existing <cite>schedule</cite> methods to work with the new interface. <code class="docutils literal notranslate"><span class="pre">RB_ID=755387</span></code></p></li>
<li><p>util-core: Remove deprecated <cite>FuturePool.defaultPool</cite>, callers should
use <cite>FuturePool.unboundedPool</cite> instead. <code class="docutils literal notranslate"><span class="pre">RB_ID=757499</span></code></p></li>
<li><p>util-stats: Remove deprecated methods on <cite>com.twitter.finagle.stats.StatsReceiver</cite>.
<code class="docutils literal notranslate"><span class="pre">RB_ID=757414</span></code></p></li>
<li><p>util-core: <cite>AsyncStream</cite> graduates out of <cite>com.twitter.concurrent.exp</cite> into
<cite>com.twitter.concurrent</cite>. Backwards compatibility aliases remain for Scala
users, but Java users will need to update their imports. <code class="docutils literal notranslate"><span class="pre">RB_ID=758061</span></code></p></li>
<li><p>util-codec: Add a new encoder <cite>com.twitter.util.Base64UrlSafeStringEncoder</cite>
which extends from <cite>com.twitter.util.Base64StringEncoder</cite>. Both the url-safe
and non-url-safe encoders can decode all strings generated by either. <code class="docutils literal notranslate"><span class="pre">RB_ID=765189</span></code></p></li>
<li><p>util-core: Remove unnecessary <cite>invalidate</cite> method from util-cache’s
<cite>com.twitter.cache.guava.LoadingFutureCache</cite>, and change the <cite>remove</cite> semantic
to match the <cite>com.twitter.cache.FutureCache</cite> contract. <code class="docutils literal notranslate"><span class="pre">RB_ID=766988</span></code></p></li>
<li><p>util-core: Remove protected <cite>Timer.monitor</cite> (overrides a monitor to use by a
timer implementation) because any possible implementation rather than <cite>Monitor.get</cite>
promotes memory leaks when timer is used to schedule recursive tasks (tasks that
reschedules themselves). <code class="docutils literal notranslate"><span class="pre">RB_ID=771736</span></code></p></li>
</ul>
</section>
</section>
<section id="id237">
<h2>6.29.0  2015-10-15<a class="headerlink" href="#id237" title="Permalink to this headline">¶</a></h2>
<section id="id238">
<h3>New Features<a class="headerlink" href="#id238" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Introduce an optional max capacity to <cite>AsyncQueue</cite>.
Modified <cite>AsyncQueue.offer</cite> to return a boolean indicating whether or not the
item was accepted. Added <cite>AsyncQueue.drain(): Try[Queue]</cite>. <code class="docutils literal notranslate"><span class="pre">RB_ID=745567</span></code></p></li>
</ul>
</section>
<section id="id239">
<h3>Breaking API Changes<a class="headerlink" href="#id239" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Remove deprecated methods from <cite>com.twitter.util.Time</cite> and
<cite>com.twitter.util.Duration</cite>. <code class="docutils literal notranslate"><span class="pre">RB_ID=751771</span></code></p></li>
<li><p>util-core: Provide methods on <cite>Stopwatch</cite> so that users can take advantage of
<cite>Time</cite> manipulation tools in latency-sensitive code when measuring elapsed
time. <code class="docutils literal notranslate"><span class="pre">RB_ID=75268</span></code></p></li>
</ul>
</section>
<section id="id240">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id240" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: The Scheduler clock stats were decommissioned as they only make sense
relative to <cite>wallTime</cite> and the tracking error we have experienced <cite>wallTime</cite> and
<cite>*Time</cite> make it impossible to use them reliably. It is not worth the performance
and code complexity to support them. <code class="docutils literal notranslate"><span class="pre">RB_ID=750239</span></code></p></li>
<li><p>util-core: <cite>JavaTimer</cite> and <cite>ScheduledThreadPoolTimer</cite> now capture the <cite>Local</cite>
state when scheduled and is used along with that <cite>Monitor</cite> when the <cite>TimerTask</cite>
is run. <code class="docutils literal notranslate"><span class="pre">RB_ID=755387</span></code></p></li>
<li><p>util-logging: <cite>QueueingHandler</cite> does not create a separate thread per instance.
<code class="docutils literal notranslate"><span class="pre">RB_ID=745567</span></code></p></li>
</ul>
</section>
</section>
<section id="id241">
<h2>6.28.0  2015-09-25<a class="headerlink" href="#id241" title="Permalink to this headline">¶</a></h2>
<section id="id242">
<h3>Breaking API Changes<a class="headerlink" href="#id242" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>util-core: Remove deprecated methods from <cite>com.twitter.util.Var</cite>.</p>
<p>To migrate <cite>observe</cite> and <cite>foreach</cite>, given <cite>aVar.observe { t =&gt; somethingWith(t) }</cite>
you would write <cite>aVar.changes.register(Witness({ t =&gt; somethingWith(t) }))</cite>.</p>
<p>To migrate <cite>observeUntil</cite>, given <cite>aVar.observeUntil(_ == something)</cite>,
you would write <cite>aVar.changes.filter(_ == something).toFuture()</cite>.</p>
<p>To migrate <cite>observeTo</cite>, given <cite>aVar.observeTo(anAtomicReference)</cite>,
you would write <cite>aVar.changes.register(Witness(anAtomicReference))</cite>.</p>
<p><code class="docutils literal notranslate"><span class="pre">RB_ID=744282</span></code></p>
</li>
</ul>
</section>
</section>
<section id="id243">
<h2>6.27.0  2015-08-28<a class="headerlink" href="#id243" title="Permalink to this headline">¶</a></h2>
<section id="id244">
<h3>Breaking API Changes<a class="headerlink" href="#id244" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>TimeFormat</cite> optionally takes a <cite>TimeZone</cite> in the constructor.
If not provided, it uses UTC.</p></li>
</ul>
</section>
</section>
<section id="id245">
<h2>6.26.0  2015-07-27<a class="headerlink" href="#id245" title="Permalink to this headline">¶</a></h2>
<section id="id246">
<h3>Breaking API Changes<a class="headerlink" href="#id246" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: <cite>Activity</cite>, <cite>BoundedStack</cite>, <cite>RingBuffer</cite> and <cite>Var</cite> migrated
off of deprecated <cite>ClassManifest</cite> to <cite>ClassTag</cite>. <code class="docutils literal notranslate"><span class="pre">RB_ID=720455</span></code></p></li>
<li><p>util-core: Added Spool#zip</p></li>
<li><p>util-core: Removed deprecated methods <cite>Future.void</cite> and <cite>Future$.void()</cite>.
Use <cite>Future.voided</cite> and <cite>Future$.Void</cite> instead. <code class="docutils literal notranslate"><span class="pre">RB_ID=720427</span></code></p></li>
</ul>
</section>
<section id="id247">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id247" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt>util-core: <cite>Promise.forwardInterruptsTo(other)</cite> is a no-op if the</dt><dd><p>other future is fulfilled. <code class="docutils literal notranslate"><span class="pre">RB_ID=714420</span></code></p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>util-events: Recording of events is disabled by default and can be updated</dt><dd><p>at runtime via TwitterServer’s <cite>/admin/events</cite> page or
<cite>/admin/events/{recordOn,recordOff}</cite>. <code class="docutils literal notranslate"><span class="pre">RB_ID=715712</span></code></p>
</dd>
</dl>
</li>
</ul>
</section>
</section>
<section id="id248">
<h2>6.25.0  2015-06-22<a class="headerlink" href="#id248" title="Permalink to this headline">¶</a></h2>
<section id="id249">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id249" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-events: Enable event sink by default.</p></li>
</ul>
</section>
</section>
<section id="id250">
<h2>6.24.0  2015-04-12<a class="headerlink" href="#id250" title="Permalink to this headline">¶</a></h2>
<section id="id251">
<h3>New Features<a class="headerlink" href="#id251" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Introduce AsyncStream, an experimental replacement for Spool.</p></li>
</ul>
</section>
<section id="id252">
<h3>Breaking API Changes<a class="headerlink" href="#id252" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt>util-core: <cite>Future.willEqual()</cite> now returns <cite>Future[Boolean]</cite> instead of</dt><dd><p><cite>Promise[Boolean]</cite>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>util-core: rename VarSource to ActivitySource. remove</dt><dd><p>com.twitter.io.exp.VarSource.Result, return Activity[T]
instead of Var[VarSource.Result[T]]. Remove FailoverVarSource in
favor of ActivitySource.orElse.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>util-core: <cite>TimeFormat</cite> now throws IllegalArgumentException if the pattern</dt><dd><p>uses the week year (‘Y’) without the week number (‘w’)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>util-core: <cite>Spool.++</cite> used to force its argument, but now it is evaluated</dt><dd><p>only if <cite>this</cite> Spool is empty. To revert to existing behavior,
simply force the argument before passing it to ++.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>util-core: <cite>Reader.writable()</cite> returns a new type, <cite>Reader.Writable</cite>, which</dt><dd><p>combines <cite>Reader</cite>, <cite>Writer</cite> and <cite>Closable</cite>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>util-core: <cite>Reader.concat</cite> and <cite>Reader.copyMany</cite> now take an AsyncStream</dt><dd><p>argument instead of Spool.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id253">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id253" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt>util-core: Futures still rethrow on fatals, but now also Monitor.handle on</dt><dd><p>them.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>util-core: <cite>Future.onFailure</cite> now only applies a <cite>PartialFunction</cite> if</dt><dd><p><cite>PartialFunction.isDefinedAt</cite> returns true.</p>
</dd>
</dl>
</li>
<li><p>util-core: <cite>AsyncSemaphore</cite> now requires that <cite>initialPermits</cite> be positive.</p></li>
<li><dl class="simple">
<dt>util-core: The <cite>Reader</cite> and <cite>Writer</cite> from <cite>Reader.Writable.close()</cite> are now</dt><dd><p>synchronized on <cite>close</cite>.</p>
</dd>
</dl>
</li>
</ul>
</section>
</section>
<section id="id254">
<h2>6.23.0 2014-12-12<a class="headerlink" href="#id254" title="Permalink to this headline">¶</a></h2>
<section id="id255">
<h3>New Features<a class="headerlink" href="#id255" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt>util-core: Add method .flushBatch() to batched future returned by Future.batched()</dt><dd><p>that immediately initiates processing of all remaining queued requests</p>
</dd>
</dl>
</li>
<li><p>util-core: Add Future.collect() method that collects over Map’s values</p></li>
<li><dl class="simple">
<dt>util-stats: Create a new module, <cite>util-stats</cite> to move <cite>finagle-core</cite></dt><dd><p>StatsReceivers to.  They retain the <cite>com.twitter.finagle</cite>
namespace to ease the transition.</p>
</dd>
</dl>
</li>
</ul>
<p>Deprecation:</p>
<ul class="simple">
<li><dl class="simple">
<dt>util-stats: Deprecate <cite>com.twitter.finagle.stats.StatsReceiver#time{,TimeFuture}</cite>.</dt><dd><p>Instead, please use the <cite>com.twitter.finagle.stats.Stat</cite> helpers
from scala, and the <cite>com.twitter.finagle.stats.JStats</cite> helpers
from java.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id256">
<h3>Breaking API Changes<a class="headerlink" href="#id256" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-cache: Remove unused com.twitter.cache.Mod trait and object</p></li>
<li><p>util-core: Rename Buf._.Unsafe to Buf._.Owned and Buf._.Copied to Buf._.Shared</p></li>
<li><p>util-core: Remove the com.twitter.util.repository package</p></li>
<li><p>util-core: Change return type of Future.batched() to com.twitter.util.Batcher</p></li>
</ul>
</section>
<section id="id257">
<h3>Java Compatibility<a class="headerlink" href="#id257" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: Flaggable is now an abstract class for Java compatibility</p></li>
<li><dl class="simple">
<dt>util-core: Make Futures an API entry point for Java users</dt><dd><p>(even for methods that take Scala collections)</p>
</dd>
</dl>
</li>
<li><p>util-core: Add compilation tests to track Java compatibility of new API</p></li>
</ul>
</section>
</section>
<section id="id258">
<h2>6.22.2  2014-10-29<a class="headerlink" href="#id258" title="Permalink to this headline">¶</a></h2>
<section id="id259">
<h3>Breaking API Changes<a class="headerlink" href="#id259" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Removed <cite>Sieve</cite> example.</p></li>
<li><dl class="simple">
<dt>util-core: Introduce new constructors and extractors for Buf types to</dt><dd><p>support more efficient, correct uses.  Buf types now come with
Copied and Direct management interfaces – Direct tries to
provide direct access to the Buf’s backing byte array, while
Copied ensures that the caller cannot accidentally mutate a Buf’s
data. Additionally, helpers to support Buf-type coersion have
been added.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id260">
<h3>New Features<a class="headerlink" href="#id260" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt>util-app: add an option so that we can let apps fail fast if reading</dt><dd><p>argument before args are parsed.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id261">
<h3>Bug Fixes<a class="headerlink" href="#id261" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util: add missing &#64;RunWith annotation</p></li>
<li><p>util-core: Java tests for Duration, Time and Timer</p></li>
<li><p>util-core: Reader.writable.fail: make reentrant</p></li>
</ul>
</section>
<section id="optimizations">
<h3>Optimizations<a class="headerlink" href="#optimizations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Slurry of PartialFunction micro-optimizations</p></li>
</ul>
</section>
</section>
<section id="id262">
<h2>6.22.1  2014-10-23<a class="headerlink" href="#id262" title="Permalink to this headline">¶</a></h2>
<section id="id263">
<h3>Bug Fixes<a class="headerlink" href="#id263" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util and finagle: fix compiler warnings</p></li>
</ul>
<p>Deprecation:</p>
<ul class="simple">
<li><p>util-core: Add deprecation of RingBuffer to changelog</p></li>
<li><p>util-core: Removed IVar and IVarField</p></li>
</ul>
</section>
<section id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Clarify Scaladoc of <cite>Promise.attached</cite></p></li>
<li><p>util-core: Add self-type to <cite>Promise.Detachable</cite> and augment Promise Scaladocs</p></li>
<li><p>util-io: Better names for Buf.slice() paramters.</p></li>
</ul>
</section>
<section id="id264">
<h3>New Features<a class="headerlink" href="#id264" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-app: Add App registration</p></li>
<li><p>util-cache Add asynchronous cache with TTL</p></li>
<li><p>util-core: Add <cite>Activity.future</cite></p></li>
</ul>
</section>
<section id="package-factoring">
<h3>Package factoring<a class="headerlink" href="#package-factoring" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-logging: factor out testing code into new package util-test</p></li>
</ul>
</section>
</section>
<section id="id265">
<h2>6.22.0  2014-10-13<a class="headerlink" href="#id265" title="Permalink to this headline">¶</a></h2>
<section id="system-requirements">
<h3>System Requirements<a class="headerlink" href="#system-requirements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: prefer Await.result(future.liftToTry) to deprecated methods</p></li>
<li><p>c.t.util.Time: Scope Locals with <cite>Local.let</cite> instead of <cite>save`+`restore</cite></p></li>
</ul>
</section>
<section id="id266">
<h3>Runtime Behavior Changes<a class="headerlink" href="#id266" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>util-logging:
* Logging’s default handler is now async by default via <cite>com.twitter.logging.QueueingHandler</cite>.
* Two Flags allowing for customization:</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>com.twitter.logging.log.async</cite>: Default true, turns this functionality on/off.</p></li>
<li><p><cite>com.twitter.logging.log.async.maxsize</cite>: Default 4096, max size of the async buffer.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>util.RingBuffer: fix buffer size on drops</p></li>
<li><p>util-io: Fix Buf.ByteBuffer.slice</p></li>
<li><p>util-core: Future.sleep: short-circuit when duration &lt;= 0</p></li>
<li><p>util-core: IVar and IVarField were removed. Use com.twitter.util.Promise instead because it provides a superset of IVar behavior.</p></li>
</ul>
</section>
<section id="id267">
<h3>New Features<a class="headerlink" href="#id267" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: introduce Memoize.snappable</p></li>
<li><p>util-app: add Flaggable.ofSet</p></li>
<li><p>util-app: introduce Flag.let</p></li>
</ul>
</section>
<section id="id268">
<h3>Optimizations<a class="headerlink" href="#id268" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Perf improvement to ConcatBuf#slice</p></li>
<li><p>util-core: Avoid accumulation of listeners in Future.select</p></li>
<li><p>util-core: Event.filter only 1 call to filter predicate</p></li>
</ul>
</section>
<section id="id269">
<h3>Bug Fixes<a class="headerlink" href="#id269" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-jvm: Fix logging in Jvm.foreachGc</p></li>
<li><p>util-core: document StorageUnit can overflow</p></li>
<li><p>util-core: check Future.proxyTo and Promise.become preconditions</p></li>
</ul>
</section>
<section id="id270">
<h3>Breaking API Changes<a class="headerlink" href="#id270" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: remove Leaky and FutureBenchmark</p></li>
</ul>
</section>
<section id="id271">
<h3>Documentation<a class="headerlink" href="#id271" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util, ostrich, finagle, twitter-server: Remove all trailing spaces</p></li>
</ul>
</section>
<section id="id272">
<h3>Package factoring<a class="headerlink" href="#id272" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Test classes from util-logging were factored into its own package, util-test.</p></li>
</ul>
</section>
<section id="id273">
<h3>Breaking API Changes<a class="headerlink" href="#id273" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>util-core: Deprecate <cite>RingBuffer</cite> in favor of Guava’s <cite>com.google.common.collect.EvictingQueue</cite>.</p></li>
</ul>
</section>
</section>
<section id="id274">
<h2>6.21.2  2014-09-08<a class="headerlink" href="#id274" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-cache: Adds a Guava-backed asynchronous cache</p></li>
<li><p>util-core: Fixed FuturePool for NLRCK</p></li>
<li><p>util-core: Improve java friendliness of futures</p></li>
<li><p>util-core: Make register/close on Event() work atomically</p></li>
<li><p>util-core: Reimplement Buf.Utf8 encoder/extractor using io.Charsets</p></li>
<li><p>util-core: storage parse() should be able to handle Long</p></li>
<li><p>util-logging: make Logger immutable &amp; break cyclic dependency on Level</p></li>
<li><p>util: Upgrade to scala_2.10</p></li>
</ul>
</section>
<section id="id275">
<h2>6.20.0  2014-08-22<a class="headerlink" href="#id275" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util: Enables cross-publishing for 2.11</p></li>
<li><p>util-app: Log severely if a flag is read at the wrong time</p></li>
<li><p>util-core: Changes transform to fail Futures if you return inside the passed closure</p></li>
<li><p>util-core: Copy bytes from Reader to Writer and OutputStream</p></li>
<li><p>util-core: Fix RichU64String to throw for negative input Problem</p></li>
<li><p>util-core: Optimizations in Buf</p></li>
<li><p>util-core: Remove some unnecessary implicit conversions</p></li>
<li><p>util-doc: Fix updatedocs.bash to update new util docs</p></li>
</ul>
</section>
<section id="id276">
<h2>6.19.0  2014-08-05<a class="headerlink" href="#id276" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util: smattering of minor cleanups in util and finagle</p></li>
<li><p>util-core: Reader and getContent symmetry</p></li>
</ul>
</section>
<section id="id277">
<h2>6.18.4  2014-07-31<a class="headerlink" href="#id277" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-core: Remove confusing NOOP 0.until(5) in Future.collect().</p></li>
<li><p>util-app: Fix a bug in global flag parsing</p></li>
</ul>
</section>
<section id="id278">
<h2>6.18.2  2014-07-23<a class="headerlink" href="#id278" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-core: Fixes a broken sbt test</p></li>
<li><p>util-core: Log exceptions caught by ChannelStatsHandler</p></li>
<li><p>util-core: Satisfy promise on fatal exception in FuturePool task</p></li>
<li><p>util-core: small perf improvements to Future.collect, Throw, Flag</p></li>
<li><p>util-logging: java-friendly LoggerFactory API</p></li>
</ul>
</section>
<section id="id279">
<h2>6.18.1  2014-07-08<a class="headerlink" href="#id279" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util: Update README to reflect correct storage units.</p></li>
<li><p>util: Convert all tests in util to scalatest</p></li>
<li><p>util-app: Simplifies the logic to get the appname</p></li>
<li><p>util-io: Buf, Reader: remove Buf.Eof; end-of-stream is None</p></li>
<li><p>util-io: Create Buf.ByteBuffer to wrap java.nio.ByteBuffer</p></li>
</ul>
</section>
<section id="id280">
<h2>6.18.0  2014-06-23<a class="headerlink" href="#id280" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-app: Don’t kill the JVM on flag-parsing failure</p></li>
<li><p>util-app: Improve the Scaladocs for com.twitter.app.Flag and friends</p></li>
<li><p>util-core: Add U(32|64)(BE|LE) to Buf</p></li>
<li><p>util-core: Add com.twitter.util.NilStopwatch</p></li>
<li><p>util-core: Add src/main/java dependency on src/main/scala</p></li>
<li><p>util-core: Catch InterruptedException in Closable collector thread</p></li>
<li><p>util-core: Fix MockTimer#schedule(Duration)(=&gt; Unit)’s cancel</p></li>
<li><p>util-core: Fix update-after-interrupt race condition in AsyncSemaphore</p></li>
<li><p>util-core: Signal the deprecation of com.twitter.util.Bijection.</p></li>
<li><p>util-logging: Add additional handlers to Logging trait</p></li>
</ul>
</section>
<section id="id281">
<h2>6.17.0  2014-06-04<a class="headerlink" href="#id281" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util: Upgrade dependency versions</p></li>
<li><p>util-core: Scheduler productivity = cpuTime/wallTime</p></li>
<li><p>util-core: Add a <cite>take</cite> method to <cite>Spool</cite></p></li>
<li><p>util-core: Introduce <cite>ConcatBuf</cite></p></li>
<li><p>util-core: add <cite>Spool.collectFuture</cite></p></li>
</ul>
</section>
<section id="id282">
<h2>6.16.0  2014-05-13<a class="headerlink" href="#id282" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-app: Add flag for configuring acceptance of undefined flags</p></li>
<li><p>util-app: Minor c.t.app.ClassPath/c.t.f.util.LoadService cleanup</p></li>
<li><p>util-core: Adds Time.sleep for testing sleeping code</p></li>
</ul>
</section>
<section id="id283">
<h2>6.15.0  2014-04-29<a class="headerlink" href="#id283" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-app: enforce close grace period</p></li>
<li><p>util-core: special case buf.slice(0, buf.length)</p></li>
<li><p>util-core: add LIFO option to LocalScheduler</p></li>
<li><p>util-core: improves usability of Var and VarSource from java</p></li>
<li><p>util-core: Make spool lazier</p></li>
<li><p>util-core: Fixes detachable semantics with ConstFuture</p></li>
<li><p>util-core: make LocalScheduler non-private for custom schedulers</p></li>
</ul>
</section>
<section id="id284">
<h2>6.14.0  2014-04-09<a class="headerlink" href="#id284" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-benchmark: Fix caliper failures due to new guava</p></li>
<li><p>util-core: Add Local.let</p></li>
<li><p>util-core: Add com.twitter.io.Charsets and replace the use of org.jboss.netty.util.CharsetUtil</p></li>
<li><p>util-core: Bump objectsize dependency to 0.0.10</p></li>
<li><p>util-core: Comprehensive Scaladocs for Scheduler-related classes and traits</p></li>
<li><p>util-core: Create a static Exception for use in <cite>Future.raiseWithin</cite></p></li>
<li><p>util-core: Future.select: fix inaccurate comments</p></li>
<li><p>util-core: Make Function classes covariant</p></li>
<li><p>util-core: Parse names into trees; introduce separate evaluation.</p></li>
<li><p>util-core: Short-circuit <cite>within</cite> and <cite>raiseWithin</cite> if Future is already satisfied</p></li>
</ul>
</section>
<section id="id285">
<h2>6.13.2  2014-03-24<a class="headerlink" href="#id285" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-core: Add <cite>StorageUnit.hashCode</cite></p></li>
<li><p>util-core: Event.mergeMap: fix Closable</p></li>
<li><p>util: Update 3rdparty library versions</p></li>
<li><p>util: Upgrade to guava 16</p></li>
</ul>
</section>
<section id="id286">
<h2>6.13.1  2014-03-20<a class="headerlink" href="#id286" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util: Update zk libraries</p></li>
</ul>
</section>
<section id="id287">
<h2>6.13.0  2014-03-14<a class="headerlink" href="#id287" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-app: add usage string, printed before flags</p></li>
<li><p>util-app: Handle comma-separated values in <cite>Flaggable.ofMap</cite></p></li>
<li><p>util-app: Implement application-level shutdown handling in App.</p></li>
<li><p>util-app: Remove hardcoded ports in FlagTest</p></li>
<li><p>util-app: sort global flags in usage</p></li>
<li><p>util-core/Offer: Don’t do indexed lookups in prepare()</p></li>
<li><p>util-core: Add support for interrupting Future.sleep</p></li>
<li><p>util-core: Check whether JVM supports thread measurement before measuring</p></li>
<li><p>util-core: Create daemon threads in all stock <cite>com.twitter.util.FuturePool</cite>s</p></li>
<li><p>util-core: Event: mergeMap, not flatMap</p></li>
<li><p>util-core: Performance optimizations for Future.collect</p></li>
<li><p>util-core: TimeLike inSeconds should not truncate</p></li>
<li><p>util-core: Var.collect, Fix deadlock caused by oversynchronizing</p></li>
<li><p>util-core: Var: prevent stale updates</p></li>
<li><p>util: ForkJoin scheduler: first draft</p></li>
</ul>
</section>
<section id="id288">
<h2>6.12.1  2014-02-18<a class="headerlink" href="#id288" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Upgrade everyone to the new c.t.common.server-set</p></li>
</ul>
</section>
<section id="id289">
<h2>6.12.0  2014-02-14<a class="headerlink" href="#id289" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>LocalScheduler: improve concurrency by sampling less</p></li>
<li><p>Option to enable thread pool scheduler in finagle, and fix the shutting down RejectedExecutionException’s.</p></li>
<li><p>re-write Future.unit in terms of Future.Unit</p></li>
<li><p>Revert “Option to enable thread pool scheduler in finagle, and fix the shutting down RejectedExecutionException’s.” (It’s breaking the build on JDK6 machines)</p></li>
<li><p>twitter-server: Report on deadlock conditions in admin/contentions</p></li>
<li><p>Update 3rdpaty zookeeper client</p></li>
<li><p>Update version of com.twitter.common*</p></li>
<li><p>util-core: Add a Scaladoc for com.twitter.util.RandomSocket</p></li>
<li><p>util-core: State[+A] =&gt; State[A]</p></li>
<li><p>util-logging: Increase richness of file-logging flags</p></li>
<li><p>util-zk: scalatest as test dep</p></li>
<li><p>util-{app,jvm}: various small improvements from gcflow</p></li>
<li><p>util: Drop util-eval dep from util-zk-common, which pulls in scala-compiler unnecessarily</p></li>
<li><p>Var: fix an iatrogenic concurrency bug</p></li>
</ul>
</section>
<section id="id290">
<h2>6.11.1  2014-01-16<a class="headerlink" href="#id290" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-collection: Depend on jsr305.</p></li>
<li><p>util-core: Add <cite>Promise.attached</cite> and Detachable.</p></li>
<li><p>util-core: Add <cite>Future.batched</cite>.</p></li>
<li><p>util-common: Fix a race condition in ExecutorServiceFuturePool.</p></li>
</ul>
</section>
<section id="id291">
<h2>6.11.0  2014-01-14<a class="headerlink" href="#id291" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-core: Add BridgedThreadPoolScheduler.</p></li>
<li><p>util-core: Add Events, discrete-time values.</p></li>
<li><p>util-core: Add Future.delayed, Timer.Nil.</p></li>
<li><p>util-core: Add Var.join.</p></li>
<li><p>util-core: Add utilities for composing Future side effects.</p></li>
<li><p>util-core: Allocation improvements to Future.isDefined, Promise.isDefined, Promise.interrupts.</p></li>
<li><p>util-core: Fix forcing issues with Spool.*::.</p></li>
<li><p>util-core: Future.followedBy-&gt;Future.before</p></li>
<li><p>util-core: s/setValue(())/setDone()/g</p></li>
<li><p>util-logging: Allocation improvements to Formatter.formatMessageLines.</p></li>
<li><p>util-logging: Get correct method and class name in c.t.u.LogRecord</p></li>
<li><p>util-zk-common: Fix finagle-serversets dependencies discrepancy.</p></li>
</ul>
</section>
<section id="id292">
<h2>6.10.0  2013-12-12<a class="headerlink" href="#id292" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><cite>util-core</cite>: Add functionality to AsyncSemaphore for executing functions as permits become available.</p></li>
<li><p><cite>util-core</cite>: Fine-grained locking to prevent deadlocks in Var.</p></li>
<li><p><cite>util-core</cite>: Introduce com.twitter.io.BufInputStream - wraps a Buf and exposes a java.io.InputStream interface.</p></li>
<li><p><cite>util-core</cite>: Introduce com.twitter.util.Memoize - thread-safe memoization of a function.</p></li>
</ul>
</section>
<section id="id293">
<h2>6.9.0  2013-12-02<a class="headerlink" href="#id293" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-core: 2.10 pattern matching strictness</p></li>
<li><p>util-core: Gives Var single-owner semantics</p></li>
<li><p>util-core: Seq[Future[A]] =&gt; Future[Seq[Try[A]]]</p></li>
<li><p>util-core: Adds a comment explicitly describing synchronous callback on observe for Var</p></li>
<li><p>util-core: async semaphore cancellation</p></li>
<li><p>util: sbt version in <cite>build.properties</cite></p></li>
</ul>
</section>
<section id="id294">
<h2>6.8.1  2013-11-15<a class="headerlink" href="#id294" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-core: Break apart interruptible FuturePool for java backcompat</p></li>
</ul>
</section>
<section id="id295">
<h2>6.8.0  2013-11-12<a class="headerlink" href="#id295" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-app: Fix null error for Flaggable[InetSocketAddress].</p></li>
<li><p>util-app: Flag, easier usage of default.</p></li>
<li><p>util-core: adds closable.close(Duration)</p></li>
<li><p>util-core: Adds com.twitter.io.exp.VarSource</p></li>
<li><p>util-core: adds comment re using FuturePool from java.</p></li>
<li><p>util-core: buffers requests until Var[Addr] is in a ready state</p></li>
<li><p>util-core: Fix Promise update race when interrupting FuturePool threads.</p></li>
<li><p>util-core: improve allocation/perf in Offer.choose and Future.select</p></li>
<li><p>util-core: Var: remove Var.apply; introduce Var.sample</p></li>
<li><p>util-zk-common: update pom com.twitter.common.zookeeper dependencies</p></li>
<li><p>util: scaladoc warning cleanup.</p></li>
</ul>
</section>
<section id="id296">
<h2>6.7.0  2013-10-18<a class="headerlink" href="#id296" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-core: Introduce Try.collect(), analagous to Future.collect</p></li>
<li><p>util-core: Add some empirically useful add-ons to Var</p></li>
<li><p>util-logging: Use ConsoleHandler when outputFlag is /dev/null</p></li>
<li><p>util-core: Fix broken string-deserialization in Buf.Utf8.unapply</p></li>
<li><p>util-core: Improve gc profile around Var</p></li>
</ul>
</section>
<section id="id297">
<h2>6.6.0  2013-10-09<a class="headerlink" href="#id297" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-app: Properly propagate underlying exceptions.</p></li>
<li><p>util-core: Add a <cite>Var.value</cite> function. (835a043)</p></li>
<li><p>util-core: Augment Var and Local in support of Finagle’s request context feature. (b2d689a)</p></li>
<li><p>util-core: Avoid instantiating TimeoutException until it is needed (CSL-592)</p></li>
<li><p>util-core: Make Future.never a val instead of a def</p></li>
<li><p>util-core: Move Var to core util, add Var.unapply</p></li>
<li><p>util-core: Testing function Time.withTimeAt now uses Locals.</p></li>
<li><p>util-core: Throw AlreadyNackd on nack-ack.</p></li>
<li><p>util-core: raiseWithin, alternative to within, that raise interrupt.</p></li>
<li><p>util-jvm: Add a GlobalFlag for a machine’s number of logical cores. (dc20fbf1)</p></li>
<li><p>util-logging: Add a NullLogger object.</p></li>
<li><p>util-logging: makes Logging more flexible for easy extension of twitter-server</p></li>
<li><p>util-zk: Add ShardCoordinator and ZkAsyncSemaphore classes. (c57b2a9)</p></li>
</ul>
</section>
<section id="id298">
<h2>6.5.0  2013-09-10<a class="headerlink" href="#id298" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-hashing: removed dependency on util-core</p></li>
<li><p>util-core: Introduce swappable schedulers, ThreadPool scheduler.</p></li>
<li><p>util-core: Scheduler - “productivity” stats, dispatches.</p></li>
<li><p>util-core: Add Future.when</p></li>
<li><p>util-core: introduced Var - composable variables</p></li>
<li><p>util-core: adding short note on Future ‘within’</p></li>
</ul>
</section>
<section id="id299">
<h2>6.4.0  2013-08-28<a class="headerlink" href="#id299" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-core: Add Return constants</p></li>
<li><p>util-core: Make ConstFuture.transform consistent with Promise.transform</p></li>
<li><p>util-core: Make it possible to explicitly set a locale on TimeFormat</p></li>
<li><p>util-logging: Refactored formatter to decrease coupling</p></li>
<li><p>util-core: Add NoSuchMethodException as fatal exception in NonFatal</p></li>
<li><p>util-app: Add some logging helpers to Flags</p></li>
<li><p>util-core: Introduce Buf, Reader, and Writer: Zerocopy, buffered I/O</p></li>
</ul>
</section>
<section id="id300">
<h2>6.3.8  2013-07-22<a class="headerlink" href="#id300" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-core: Add Future.True and Future.False constants</p></li>
<li><p>util-app: Treat ‘–’ as end of flags indicator</p></li>
<li><p>util-app: Add support for long flags</p></li>
</ul>
</section>
<section id="id301">
<h2>6.3.7  2013-06-24<a class="headerlink" href="#id301" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-app: flags use by-name default values</p></li>
<li><p>util-app: Make the global flag test idempotent</p></li>
<li><p>util-collection: guard against missing element exception in BGQ</p></li>
<li><p>util: Deal with UnknownHostException thrown by InetAddress.getLocalHost</p></li>
<li><p>util: update version in README</p></li>
</ul>
</section>
<section id="id302">
<h2>6.3.6  2013-06-11<a class="headerlink" href="#id302" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util: Update owners files</p></li>
<li><p>util-jvm: CpuProfile: sleep the right amount of time for the recording thread</p></li>
<li><p>util-jvm: always try to construct hotspot instance Detection by VM name is unreliable.</p></li>
<li><p>util: util/* compiling, testing and benchmarking with pants.</p></li>
<li><p>util-eval: Gizzard: Some followup deps alignment to fix deployment classpath issues</p></li>
</ul>
</section>
<section id="id303">
<h2>6.3.5  2013-05-31<a class="headerlink" href="#id303" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-core: add Time.fromMicroseconds to util.Time</p></li>
<li><p>util-core: NullMonitor takes itself out when composed</p></li>
<li><p>util-core: deprecate Config</p></li>
<li><p>util-hashing: add entryForHash api to Distributor</p></li>
<li><p>util-app: Flag: clarify usage and hide all Flag constructors.</p></li>
<li><p>util-core: Added reduceLeft and foldLeft to the Spool class</p></li>
<li><p>util: Update sbt project for (util, ostrich, finagle)</p></li>
</ul>
</section>
<section id="id304">
<h2>6.3.4  2013-05-16<a class="headerlink" href="#id304" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-core: Convenience method to await all</p></li>
<li><p>util-core: RootMonitor never propagates non fatal exception</p></li>
</ul>
</section>
<section id="id305">
<h2>6.3.3  2013-05-13<a class="headerlink" href="#id305" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-collection: When growing chain only grow the chain. This addresses a NoSuchElementException.</p></li>
<li><p>util-eval: fix for when class files are on the classpath directly</p></li>
<li><p>util: Generate build.properties from sbt</p></li>
<li><p>util-core:Time, Duration: implement Java serialization</p></li>
<li><p>util-thrift: Bump Jackson to 1.9.11</p></li>
<li><p>util-core: Add withFilter to Future and Try</p></li>
<li><p>util: Remove zookeeper dependency ivyXML and replace with ExclusionRules</p></li>
</ul>
</section>
<section id="id306">
<h2>6.3.2  2013-04-18<a class="headerlink" href="#id306" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-core: create less garbage in AsyncSemaphore.acquire()</p></li>
<li><p>util-core: deprecate com.twitter.util.concurrent.Concurrent{Pool, MultiMap}</p></li>
<li><p>util-core: restore prior Future.get behavior</p></li>
<li><p>util-core: Spool error propagation</p></li>
<li><p>util-core: Use futures for schema detection to avoid blocking finagle threads</p></li>
<li><p>util-refect: test: use sys.error</p></li>
<li><p>util-zk: ZNode(“/path”).parentPath should be “/”, not an empty string</p></li>
</ul>
</section>
<section id="id307">
<h2>6.3.0  2013-04-05<a class="headerlink" href="#id307" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-core: flag a bug with U64 truncation</p></li>
<li><p>util-core: Future.get: include fatal exceptions</p></li>
<li><p>util-core: deprecate Future#apply, get.</p></li>
<li><p>util-core: special-case Duration.Zero to avoid allocation</p></li>
</ul>
</section>
<section id="id308">
<h2>6.2.5  2013-03-27<a class="headerlink" href="#id308" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-zk: Improvements to util-zk NativeConnector</p></li>
<li><p>util: Update sbt project definition</p></li>
<li><p>util: launching test in all scala version of the project</p></li>
</ul>
</section>
<section id="id309">
<h2>6.2.4  2013-03-21<a class="headerlink" href="#id309" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-core: Add Future.Nil, it can be used anytime you need a Future[Seq[_]] with an empty sequence.</p></li>
<li><p>util-core: fix VM test error by ensuring reset</p></li>
<li><p>util-core: Move Disposable/Managed to util</p></li>
<li><p>util-logging: scribe binary thrift for tbird add/remove/scrub ops:</p></li>
<li><p>util: upgrade com.twitter.common.objectsize to 0.0.7</p></li>
</ul>
</section>
<section id="id310">
<h2>6.2.3  2013-03-08<a class="headerlink" href="#id310" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-core: Remove StreamHelper</p></li>
<li><p>Flag: create Map flag type</p></li>
</ul>
</section>
<section id="id311">
<h2>6.2.2  2013-02-25<a class="headerlink" href="#id311" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Flag: introduce global flags</p></li>
</ul>
</section>
<section id="id312">
<h2>6.2.1  2013-02-20<a class="headerlink" href="#id312" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>HttpMux: provide visibility into available handlers</p></li>
<li><p>Flag: add Time type</p></li>
<li><p>Spool: encode exceptions</p></li>
<li><p>Closable: use Time.Bottom for close()</p></li>
<li><p>Future.within: bypass timer entirely if we’re passed Duration.Top</p></li>
<li><p>Awaitable: introduce Await</p></li>
<li><p>util-jvm: GC predictor</p></li>
<li><p>io.Files: don’t overallocate buffers</p></li>
<li><p>Future: use .nonEmpty instead of != Nil</p></li>
</ul>
</section>
<section id="id313">
<h2>6.1.0  2013-01-30<a class="headerlink" href="#id313" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>preliminary 2.10 port/build</p></li>
<li><p>Add Closable trait</p></li>
<li><p>Add contention snapshot</p></li>
</ul>
</section>
<section id="id314">
<h2>6.0.6  2013-01-22<a class="headerlink" href="#id314" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-core: concurrent.SpoolSource utility for creating Spools</p></li>
<li><p>util-core: Spool.flatMap, Spool.++</p></li>
<li><p>util-app: add shutdown hooks</p></li>
<li><p>util-logging: Make the logging work properly for Scala and
mixed Scala/Java</p></li>
</ul>
</section>
<section id="id315">
<h2>6.0.4  2012-12-18<a class="headerlink" href="#id315" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Broker: more efficient dequeueing of offers</p></li>
<li><p>Duration: parse all output of Duration.toString</p></li>
<li><p>ScheduledThreadPoolTimer: aggressively remove runnables
to avoid space leak</p></li>
<li><p>util-core documentation: fix some parentheses, backticks</p></li>
<li><p>util-hashing: add Hashable type class</p></li>
</ul>
</section>
<section id="id316">
<h2>6.0.3  2012-12-11<a class="headerlink" href="#id316" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Promise: remove future tracing, add explicit transforming state to
avoid extraneous allocation</p></li>
<li><p>update zk client</p></li>
<li><p>com.twitter.app: composable apps &amp; flags</p></li>
</ul>
</section>
<section id="id317">
<h2>6.0.1  2012-11-26<a class="headerlink" href="#id317" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Use java.util.ArrayDeque in place of mutable.Queue due to
<a class="reference external" href="https://issues.scala-lang.org/browse/SI-6690">https://issues.scala-lang.org/browse/SI-6690</a></p></li>
</ul>
</section>
<section id="id318">
<h2>6.0.0  2012-11-26<a class="headerlink" href="#id318" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Removed future cancellation, which is now replaced with one-shot
interrupts. These also carry a <code class="docutils literal notranslate"><span class="pre">cause</span></code> which will be used
profitably in finagle.</p></li>
<li><p>A new, leaner Promise implemetnation</p></li>
<li><p>New implementations for Time and Duration with true sentinels</p></li>
<li><p>Promise, Try combinators no longer attempt to catch fatal
exceptions</p></li>
</ul>
</section>
<section id="id319">
<h2>5.3.14  2012-11-20<a class="headerlink" href="#id319" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>fix compiler warnings</p></li>
<li><p>Future.join: support up to 22-tupled futures</p></li>
<li><p>com.twitter.concurrent.Serialized: explicit docs</p></li>
<li><p>util-logging: concurrent enqueue support for ScribeHandler, add stats</p></li>
</ul>
</section>
<section id="id320">
<h2>5.3.13  2012-10-16<a class="headerlink" href="#id320" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>AsyncSemaphore: Use volatile vars for the active number and the waiters</p></li>
<li><p>util-logging: fix ThrottledHandler to not leak memory</p></li>
<li><p>util-logging: for file handlers, default to append=true since that was the default with FileHandlerConfig and is safer behavior</p></li>
<li><p>upgrading slf4j dependent projects (1.6.1).</p></li>
<li><p>sbt: robust MD5 checking.</p></li>
<li><p>Fix Spool.foreachElem crashing on resoved spool with error</p></li>
<li><p>FuturePool.defaultPool: use cached threadpool by default.</p></li>
<li><p>util-logging: Correctly handle files with a shared prefix.</p></li>
</ul>
</section>
<section id="id321">
<h2>5.3.10  2012-09-06<a class="headerlink" href="#id321" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Improve ZNode.name and ZNode.parentPath to not use Regexes</p></li>
<li><p>Fix ScheduledThreadPoolTimer.schedule(…).cancel()</p></li>
<li><p>Upgrade guava dependency to v13</p></li>
<li><p>Add a ZkClient Connector that dispatches requests across several zookeeper connections</p></li>
<li><p>Support prefix-less sequential nodes in util-zk</p></li>
<li><p>util-logging: Add Logger.withLoggers.</p></li>
<li><p>Clean up equals and hashCode for Time and Duration</p></li>
</ul>
</section>
<section id="id322">
<h2>5.3.7  2012-08-21<a class="headerlink" href="#id322" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Disable log handler purging</p></li>
<li><p>Added ThriftCodec</p></li>
<li><p>Add a Time.hashCode method</p></li>
<li><p>GC monitor: be more quiet about missed GCs</p></li>
<li><p>patch public release of OSS libraries; catch up sbt</p></li>
</ul>
</section>
<section id="id323">
<h2>5.3.6  2012-07-26<a class="headerlink" href="#id323" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fix temporary file name generation</p></li>
</ul>
</section>
<section id="id324">
<h2>5.3.0  2012-06-25<a class="headerlink" href="#id324" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-jvm: start timer thread in ‘daemon’ mode</p></li>
</ul>
</section>
<section id="id325">
<h2>5.2.0  2012-06-14<a class="headerlink" href="#id325" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>JVM CPU profiler</p></li>
<li><p>util-jvm: fix for JDK 7</p></li>
</ul>
</section>
<section id="id326">
<h2>5.1.2  2012-06-07<a class="headerlink" href="#id326" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>fix documentation</p></li>
<li><p>util-jvm: gc monitoring</p></li>
<li><p>Kill com.twitter.concurrent.Channel</p></li>
</ul>
</section>
<section id="id327">
<h2>5.0.4  2012-06-01<a class="headerlink" href="#id327" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Upgrade scala to 2.9.2</p></li>
<li><p>Java compatibility: void -&gt; voided</p></li>
</ul>
</section>
<section id="id328">
<h2>4.0.1<a class="headerlink" href="#id328" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>added AsyncQueue</p></li>
<li><p>config:validate optional subconfigs</p></li>
<li><p>util-zk: allow multiple session event listeners, fix AsyncCallbackPromise
exception handling, misc fixes</p></li>
<li><p>offer: deprecate apply()</p></li>
<li><p>propagate cancellation exception when Timer.doAt future is cancelled</p></li>
<li><p>KetamaDistributor optionally preserves a floating point truncation</p></li>
<li><p>Timer uses daemon thread by default</p></li>
<li><p>Future.monitor: release reference to promise when it’s satisfied</p></li>
<li><p>Future: misc Java compatibility fixes</p></li>
<li><p>Eval.scala: Allow &#64;deprecated</p></li>
<li><p>util-logging: Add LoggerFactory</p></li>
<li><p>Util: Add util-class-preloader (classfile preloading), util-jvm
(access to performance counters)</p></li>
<li><p>Future: divorce from TryLike hierarchy</p></li>
<li><p>LogRecord: use MessageFormat</p></li>
<li><p>Time: Treat MaxValue specially in TimeMod.{add,sub}</p></li>
</ul>
</section>
<section id="id329">
<h2>3.0.0  2012-03-14<a class="headerlink" href="#id329" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>AsyncSemaphore: allow parameterizing maximum queue size</p></li>
<li><p>Logging: scribe handlers may now be named “scribe”</p></li>
<li><p>Logging: Always make sure Level is initialized before being
able to refer to Logger.</p></li>
<li><p>Offer/Broker: simpler, more flexible implementation</p></li>
<li><p>Config: Config.optional results in lazy evaluation</p></li>
</ul>
</section>
<section id="id330">
<h2>2.0.0  2012-02-27<a class="headerlink" href="#id330" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>NetUtil: optimize ipv4 address parsing</p></li>
<li><p>upgrade to Guava r11</p></li>
</ul>
</section>
<section id="id331">
<h2>1.12.13  2012-02-13<a class="headerlink" href="#id331" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>NetUtil: Add inetAddressToInt, isInetAddressInBlock, isInetAddressInBlocks</p></li>
<li><p>Future tracer: fix bug where double proxied exceptions fail</p></li>
<li><p>add “ExceptionalFunction0” for easier use from Java</p></li>
<li><p>Locals: many optimizations to reduce allocations caused by saving
and restoring contexts</p></li>
</ul>
</section>
<section id="id332">
<h2>1.12.12  2012-01-24<a class="headerlink" href="#id332" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util-zk-common: Asynchronous wrappers for common ServerSets.</p></li>
<li><p>IVar.unget: only remove closures by object equality</p></li>
<li><p>Offer.choose: use nanoseconds for random seed</p></li>
<li><p>Future.const - builds a constant Future from an existing Try</p></li>
</ul>
</section>
<section id="id333">
<h2>1.12.9  2012-01-05<a class="headerlink" href="#id333" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>ThreadPoolFactories are named by default</p></li>
<li><p>Offer: ensure ObjectOrder is independent of Object#hashCode</p></li>
<li><p>new package: util-zk: asynchronous bindings to ZooKeeper</p></li>
</ul>
</section>
<section id="id334">
<h2>1.12.7  2011-12-02<a class="headerlink" href="#id334" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Future: temporarily disabling default usage of the AsmTracer</p></li>
</ul>
</section>
<section id="id335">
<h2>1.12.6  2011-12-01<a class="headerlink" href="#id335" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Future: all helper methods now have Java-friendly equivalents
that take Lists.</p></li>
</ul>
</section>
<section id="id336">
<h2>1.12.5  2011-11-29<a class="headerlink" href="#id336" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Config: recompile configs based on hash instead of timestamp, add
memoization</p></li>
<li><p>Timer: make JavaTimer more resilient, log errors</p></li>
<li><p>FuturePool: Fixed race condition in FuturePool where work that was
cancelled would not clean up after itself</p></li>
<li><p>Function: Add ExceptionalFunction type to allow Java to throw
checked exceptions.</p></li>
<li><p>Futures: trace dispatch “stack”, supplying it as a stack trace for
exceptions, implement “transform”, “transformedBy” to allow for a
more imperative control flow when used from Java.</p></li>
<li><p>Monitors: composable widgets for handling exceptions</p></li>
</ul>
</section>
<section id="id337">
<h2>1.12.4  2011-11-09<a class="headerlink" href="#id337" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Files.delete has to follow symlinks because jdk6 support
for symlinks is weaksauce</p></li>
<li><p>properly handle cancellation in FuturePool</p></li>
<li><p>Locals: ensure <code class="docutils literal notranslate"><span class="pre">Local</span></code> is fully initialized before registering</p></li>
</ul>
</section>
<section id="id338">
<h2>1.12.3  2011-11-08<a class="headerlink" href="#id338" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>add some docs to Offer, Time</p></li>
<li><p>util.io.Files: file utilities, documentation for TempFile</p></li>
<li><p>Offer/Broker: explicit return types for Java compat.</p></li>
</ul>
</section>
<section id="id339">
<h2>1.12.2  2011-10-28<a class="headerlink" href="#id339" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Json thrift deserializer</p></li>
<li><p>Finagle: count pending timeouts</p></li>
<li><p>Fix eval precompile bug</p></li>
</ul>
</section>
<section id="id340">
<h2>1.12.0  2011-10-21<a class="headerlink" href="#id340" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>util.Config.Specified now delays evaluation of specified value, to
ensure evaluation happens in correct dependency order, rather than
in class-hierarchy order.  This change is mostly source compatible,
unless you have directly used the Specified class.</p></li>
</ul>
</section>
<section id="id341">
<h2>1.11.9  2011-10-14<a class="headerlink" href="#id341" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>ivar/future: provide “TCE”, per-thread scheduling, and
promise squashing</p></li>
<li><p>logger: restore original logging level after modifying them</p></li>
<li><p>u64: fix</p></li>
<li><p>filehandler: thread-visibility</p></li>
<li><p>eval: fix mtime invalidation</p></li>
<li><p>base64 encoder: make it threadsafe</p></li>
</ul>
</section>
<section id="id342">
<h2>1.11.8  2011-10-04<a class="headerlink" href="#id342" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Back out TCE for ivar/futures. This introduced a space
leak and will be fixed momentarily.</p></li>
<li><p>FuturePool: Catch any exception thrown by executor.submit()
and return as a Future.exception</p></li>
</ul>
</section>
<section id="id343">
<h2>1.11.7  2011-09-28<a class="headerlink" href="#id343" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>ivar/future: provide “TCE”, per-thread scheduling, and
promise squashing</p></li>
<li><p>util-core: add bijection</p></li>
<li><p>util: Time.now is now measured at nanosecond granularity
instead of millisecond.</p></li>
<li><p>futurepool: don’t attempt to perform work for Futures
that are cancelled</p></li>
</ul>
</section>
<section id="id344">
<h2>1.11.2  2011-08-12<a class="headerlink" href="#id344" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>offer: use Int.compare instead of subtraction to avoid
integer overflow in ObjectOrder</p></li>
<li><p>offer: accept an empty offer list.  this is just Offer.never</p></li>
<li><p>Eval: persistent compilation targets</p></li>
</ul>
</section>
<section id="id345">
<h2>1.11.1  2011-08-05<a class="headerlink" href="#id345" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>offer/broker: fixes, simplifications - gets rid of thunked
values on sends.  removing the infrastructure required to
support this led to significant simplification.  lock the
correct objects for broker events.  don’t try to resolve
identical objects in lock order.</p></li>
<li><p>offer: java support</p></li>
<li><p>hashing: actually return 64bit values from the 64bit hash
functions; tests</p></li>
</ul>
</section>
<section id="id346">
<h2>1.11.0  2011-08-02<a class="headerlink" href="#id346" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Introduce new util-codec module to contain various codecs.
Primarily so that it can depend on apache commons-codec 1.5
for base64 improvements over the sun one.</p></li>
</ul>
</section>
<section id="id347">
<h2>1.10.4  2011-07-29<a class="headerlink" href="#id347" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Added TestLogging specs helper to util-logging.</p></li>
<li><p>Spools: like scala streams, but with deferred tails.</p></li>
</ul>
</section>
<section id="id348">
<h2>1.10.3  2011-07-27<a class="headerlink" href="#id348" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>add GZip string encoder</p></li>
</ul>
</section>
<section id="id349">
<h2>1.10.2  2011-07-18<a class="headerlink" href="#id349" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Maintain a map of already visited objects incase someone
creates a circular of config objects.</p></li>
<li><p>Make Duration hashable.</p></li>
<li><p>Promise.on{Success, Failure}: returned chained future.</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><a href="index.html"><h3>Util</h3></a>
<p>
  Miscellaneous Idiomatic Scala Utilities & Wrappers, by Twitter.
</p>

<h3>Useful Links</h3>
<ul>
  <li><a href="https://github.com/twitter/util">Util on GitHub</a></li>
  <li><a href="https://github.com/twitter/util/issues">Issue Tracker</a></li>
</ul>
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Changelog</a><ul>
<li><a class="reference internal" href="#unreleased">Unreleased</a></li>
<li><a class="reference internal" href="#id1">24.2.0</a><ul>
<li><a class="reference internal" href="#runtime-behavior-changes">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id2">23.11.0</a><ul>
<li><a class="reference internal" href="#id3">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id4">22.12.0</a><ul>
<li><a class="reference internal" href="#new-features">New Features</a></li>
<li><a class="reference internal" href="#deprecations">Deprecations</a></li>
<li><a class="reference internal" href="#id5">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id6">22.7.0</a><ul>
<li><a class="reference internal" href="#breaking-api-changes">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id7">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id8">22.4.0</a><ul>
<li><a class="reference internal" href="#id9">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id10">22.3.0</a><ul>
<li><a class="reference internal" href="#id11">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id12">22.2.0</a><ul>
<li><a class="reference internal" href="#id13">New Features</a></li>
<li><a class="reference internal" href="#id14">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id15">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id16">22.1.0</a><ul>
<li><a class="reference internal" href="#id17">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id18">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id19">21.12.0</a><ul>
<li><a class="reference internal" href="#id20">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id21">21.11.0</a><ul>
<li><a class="reference internal" href="#id22">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id23">New Features</a></li>
<li><a class="reference internal" href="#id24">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id25">21.10.0</a><ul>
<li><a class="reference internal" href="#id26">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id27">21.9.0</a><ul>
<li><a class="reference internal" href="#id28">New Features</a></li>
<li><a class="reference internal" href="#id29">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id30">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#no-21-7-0-release">21.8.0 (No 21.7.0 Release)</a><ul>
<li><a class="reference internal" href="#id31">New Features</a></li>
<li><a class="reference internal" href="#id32">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id33">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id34">21.6.0</a><ul>
<li><a class="reference internal" href="#id35">New Features</a></li>
<li><a class="reference internal" href="#id36">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id37">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id38">21.5.0</a><ul>
<li><a class="reference internal" href="#id39">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id40">21.4.0</a><ul>
<li><a class="reference internal" href="#id41">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id42">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id43">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id44">21.3.0</a><ul>
<li><a class="reference internal" href="#id45">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id46">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id47">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id48">21.2.0</a></li>
<li><a class="reference internal" href="#id49">21.1.0</a></li>
<li><a class="reference internal" href="#id50">20.12.0</a><ul>
<li><a class="reference internal" href="#id51">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id52">New Features</a></li>
<li><a class="reference internal" href="#id53">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id54">20.10.0</a><ul>
<li><a class="reference internal" href="#bug-fixes">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id55">20.9.0</a><ul>
<li><a class="reference internal" href="#id56">New Features</a></li>
<li><a class="reference internal" href="#id57">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id58">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id59">20.8.1</a><ul>
<li><a class="reference internal" href="#id60">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#do-not-use">20.8.0 (DO NOT USE)</a><ul>
<li><a class="reference internal" href="#id61">New Features</a></li>
<li><a class="reference internal" href="#id62">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id63">20.7.0</a><ul>
<li><a class="reference internal" href="#id64">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id65">20.6.0</a><ul>
<li><a class="reference internal" href="#id66">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id67">20.5.0</a><ul>
<li><a class="reference internal" href="#id68">New Features</a></li>
<li><a class="reference internal" href="#id69">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id70">20.4.1</a><ul>
<li><a class="reference internal" href="#id71">New Features</a></li>
<li><a class="reference internal" href="#id72">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id73">20.4.0 (DO NOT USE)</a><ul>
<li><a class="reference internal" href="#id74">New Features</a></li>
<li><a class="reference internal" href="#id75">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id76">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id77">20.3.0</a><ul>
<li><a class="reference internal" href="#id78">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id79">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id80">20.2.1</a><ul>
<li><a class="reference internal" href="#id81">New Features</a></li>
<li><a class="reference internal" href="#id82">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id83">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id84">20.1.0</a></li>
<li><a class="reference internal" href="#id85">19.12.0</a><ul>
<li><a class="reference internal" href="#id86">New Features</a></li>
<li><a class="reference internal" href="#id87">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id88">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id89">Deprecations</a></li>
<li><a class="reference internal" href="#id90">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id91">19.11.0</a><ul>
<li><a class="reference internal" href="#id92">New Features</a></li>
<li><a class="reference internal" href="#id93">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id94">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id95">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id96">19.10.0</a><ul>
<li><a class="reference internal" href="#id97">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id98">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id99">19.9.0</a><ul>
<li><a class="reference internal" href="#id100">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id101">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id102">19.8.1</a><ul>
<li><a class="reference internal" href="#id103">New Features</a></li>
<li><a class="reference internal" href="#java-compatibility">Java Compatibility</a></li>
<li><a class="reference internal" href="#id104">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id105">19.8.0</a><ul>
<li><a class="reference internal" href="#id106">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id107">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id108">19.7.0</a><ul>
<li><a class="reference internal" href="#id109">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id110">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id111">19.6.0</a><ul>
<li><a class="reference internal" href="#id112">Bug Fixes</a></li>
<li><a class="reference internal" href="#id113">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id114">19.5.1</a></li>
<li><a class="reference internal" href="#id115">19.5.0</a><ul>
<li><a class="reference internal" href="#id116">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id117">19.4.0</a><ul>
<li><a class="reference internal" href="#id118">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id119">19.3.0</a><ul>
<li><a class="reference internal" href="#id120">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id121">19.2.0</a><ul>
<li><a class="reference internal" href="#id122">New Features</a></li>
<li><a class="reference internal" href="#id123">Bug Fixes</a></li>
<li><a class="reference internal" href="#id124">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id125">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id126">19.1.0</a><ul>
<li><a class="reference internal" href="#id127">New Features</a></li>
<li><a class="reference internal" href="#id128">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id129">18.12.0</a><ul>
<li><a class="reference internal" href="#id130">New Features</a></li>
<li><a class="reference internal" href="#id131">Bug Fixes</a></li>
<li><a class="reference internal" href="#id132">Deprecations</a></li>
<li><a class="reference internal" href="#id133">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id134">18.11.0</a><ul>
<li><a class="reference internal" href="#id135">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id136">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id137">18.10.0</a><ul>
<li><a class="reference internal" href="#id138">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id139">New Features</a></li>
<li><a class="reference internal" href="#id140">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id141">18.9.1</a><ul>
<li><a class="reference internal" href="#id142">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id143">Bug Fixes</a></li>
<li><a class="reference internal" href="#id144">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id145">18.9.0</a><ul>
<li><a class="reference internal" href="#id146">New Features</a></li>
<li><a class="reference internal" href="#id147">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id148">18.8.0</a><ul>
<li><a class="reference internal" href="#id149">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id150">18.7.0</a><ul>
<li><a class="reference internal" href="#id151">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id152">18.6.0</a><ul>
<li><a class="reference internal" href="#id153">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id154">Bug Fixes</a></li>
<li><a class="reference internal" href="#id155">Deprecations</a></li>
<li><a class="reference internal" href="#id156">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id157">18.5.0</a><ul>
<li><a class="reference internal" href="#id158">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id159">18.4.0</a><ul>
<li><a class="reference internal" href="#id160">New Features</a></li>
<li><a class="reference internal" href="#id161">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id162">18.3.0</a><ul>
<li><a class="reference internal" href="#id163">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id164">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id165">18.2.0</a><ul>
<li><a class="reference internal" href="#id166">New Features</a></li>
<li><a class="reference internal" href="#id167">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id168">18.1.0</a><ul>
<li><a class="reference internal" href="#id169">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id170">17.12.0</a><ul>
<li><a class="reference internal" href="#id171">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id172">17.11.0</a><ul>
<li><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li><a class="reference internal" href="#id173">New Features</a></li>
<li><a class="reference internal" href="#id174">Bug Fixes</a></li>
<li><a class="reference internal" href="#id175">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id176">17.10.0</a><ul>
<li><a class="reference internal" href="#release-version-changes">Release Version Changes:</a></li>
<li><a class="reference internal" href="#id177">New Features</a></li>
<li><a class="reference internal" href="#id178">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id179">Bug Fixes</a></li>
<li><a class="reference internal" href="#id180">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id181">7.1.0  2017-09-06</a><ul>
<li><a class="reference internal" href="#id182">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id183">7.0.0  2017-08-15</a><ul>
<li><a class="reference internal" href="#id184">New Features</a></li>
<li><a class="reference internal" href="#id185">Bug Fixes</a></li>
<li><a class="reference internal" href="#id186">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id187">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id188">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id189">6.45.0  2017-06-06</a><ul>
<li><a class="reference internal" href="#id190">New Features</a></li>
<li><a class="reference internal" href="#id191">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id192">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id193">6.43.0  2017-04-20</a><ul>
<li><a class="reference internal" href="#id194">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id195">New Features</a></li>
<li><a class="reference internal" href="#id196">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id197">6.42.0  2017-03-10</a><ul>
<li><a class="reference internal" href="#id198">New Features</a></li>
<li><a class="reference internal" href="#id199">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id200">Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id201">6.41.0  2017-02-03</a><ul>
<li><a class="reference internal" href="#id202">New Features</a></li>
<li><a class="reference internal" href="#id203">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id204">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id205">6.40.0  2016-12-20</a><ul>
<li><a class="reference internal" href="#id206">Bug Fixes</a></li>
<li><a class="reference internal" href="#id207">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id208">6.39.0  2016-11-22</a></li>
<li><a class="reference internal" href="#id209">6.38.0  2016-10-10</a><ul>
<li><a class="reference internal" href="#id210">New Features</a></li>
<li><a class="reference internal" href="#id211">Bug Fixes</a></li>
<li><a class="reference internal" href="#id212">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id213">6.37.0  2016-09-07</a><ul>
<li><a class="reference internal" href="#id214">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id215">6.36.0  2016-08-25</a><ul>
<li><a class="reference internal" href="#id216">New Features</a></li>
<li><a class="reference internal" href="#id217">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id218">6.35.0  2016-07-07</a><ul>
<li><a class="reference internal" href="#id219">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id220">New Features</a></li>
<li><a class="reference internal" href="#id221">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id222">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id223">6.34.0  2016-04-26</a><ul>
<li><a class="reference internal" href="#id224">New Features</a></li>
<li><a class="reference internal" href="#id225">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id226">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id227">6.33.0  2016-03-10</a><ul>
<li><a class="reference internal" href="#id228">New Features</a></li>
<li><a class="reference internal" href="#id229">Bug Fixes</a></li>
<li><a class="reference internal" href="#id230">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id231">6.32.0  2016-02-03</a><ul>
<li><a class="reference internal" href="#id232">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id233">6.31.0  2016-02-02</a></li>
<li><a class="reference internal" href="#id234">6.30.0  2015-12-03</a><ul>
<li><a class="reference internal" href="#id235">New Features</a></li>
<li><a class="reference internal" href="#id236">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id237">6.29.0  2015-10-15</a><ul>
<li><a class="reference internal" href="#id238">New Features</a></li>
<li><a class="reference internal" href="#id239">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id240">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id241">6.28.0  2015-09-25</a><ul>
<li><a class="reference internal" href="#id242">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id243">6.27.0  2015-08-28</a><ul>
<li><a class="reference internal" href="#id244">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id245">6.26.0  2015-07-27</a><ul>
<li><a class="reference internal" href="#id246">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id247">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id248">6.25.0  2015-06-22</a><ul>
<li><a class="reference internal" href="#id249">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id250">6.24.0  2015-04-12</a><ul>
<li><a class="reference internal" href="#id251">New Features</a></li>
<li><a class="reference internal" href="#id252">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id253">Runtime Behavior Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id254">6.23.0 2014-12-12</a><ul>
<li><a class="reference internal" href="#id255">New Features</a></li>
<li><a class="reference internal" href="#id256">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id257">Java Compatibility</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id258">6.22.2  2014-10-29</a><ul>
<li><a class="reference internal" href="#id259">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id260">New Features</a></li>
<li><a class="reference internal" href="#id261">Bug Fixes</a></li>
<li><a class="reference internal" href="#optimizations">Optimizations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id262">6.22.1  2014-10-23</a><ul>
<li><a class="reference internal" href="#id263">Bug Fixes</a></li>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
<li><a class="reference internal" href="#id264">New Features</a></li>
<li><a class="reference internal" href="#package-factoring">Package factoring</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id265">6.22.0  2014-10-13</a><ul>
<li><a class="reference internal" href="#system-requirements">System Requirements</a></li>
<li><a class="reference internal" href="#id266">Runtime Behavior Changes</a></li>
<li><a class="reference internal" href="#id267">New Features</a></li>
<li><a class="reference internal" href="#id268">Optimizations</a></li>
<li><a class="reference internal" href="#id269">Bug Fixes</a></li>
<li><a class="reference internal" href="#id270">Breaking API Changes</a></li>
<li><a class="reference internal" href="#id271">Documentation</a></li>
<li><a class="reference internal" href="#id272">Package factoring</a></li>
<li><a class="reference internal" href="#id273">Breaking API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id274">6.21.2  2014-09-08</a></li>
<li><a class="reference internal" href="#id275">6.20.0  2014-08-22</a></li>
<li><a class="reference internal" href="#id276">6.19.0  2014-08-05</a></li>
<li><a class="reference internal" href="#id277">6.18.4  2014-07-31</a></li>
<li><a class="reference internal" href="#id278">6.18.2  2014-07-23</a></li>
<li><a class="reference internal" href="#id279">6.18.1  2014-07-08</a></li>
<li><a class="reference internal" href="#id280">6.18.0  2014-06-23</a></li>
<li><a class="reference internal" href="#id281">6.17.0  2014-06-04</a></li>
<li><a class="reference internal" href="#id282">6.16.0  2014-05-13</a></li>
<li><a class="reference internal" href="#id283">6.15.0  2014-04-29</a></li>
<li><a class="reference internal" href="#id284">6.14.0  2014-04-09</a></li>
<li><a class="reference internal" href="#id285">6.13.2  2014-03-24</a></li>
<li><a class="reference internal" href="#id286">6.13.1  2014-03-20</a></li>
<li><a class="reference internal" href="#id287">6.13.0  2014-03-14</a></li>
<li><a class="reference internal" href="#id288">6.12.1  2014-02-18</a></li>
<li><a class="reference internal" href="#id289">6.12.0  2014-02-14</a></li>
<li><a class="reference internal" href="#id290">6.11.1  2014-01-16</a></li>
<li><a class="reference internal" href="#id291">6.11.0  2014-01-14</a></li>
<li><a class="reference internal" href="#id292">6.10.0  2013-12-12</a></li>
<li><a class="reference internal" href="#id293">6.9.0  2013-12-02</a></li>
<li><a class="reference internal" href="#id294">6.8.1  2013-11-15</a></li>
<li><a class="reference internal" href="#id295">6.8.0  2013-11-12</a></li>
<li><a class="reference internal" href="#id296">6.7.0  2013-10-18</a></li>
<li><a class="reference internal" href="#id297">6.6.0  2013-10-09</a></li>
<li><a class="reference internal" href="#id298">6.5.0  2013-09-10</a></li>
<li><a class="reference internal" href="#id299">6.4.0  2013-08-28</a></li>
<li><a class="reference internal" href="#id300">6.3.8  2013-07-22</a></li>
<li><a class="reference internal" href="#id301">6.3.7  2013-06-24</a></li>
<li><a class="reference internal" href="#id302">6.3.6  2013-06-11</a></li>
<li><a class="reference internal" href="#id303">6.3.5  2013-05-31</a></li>
<li><a class="reference internal" href="#id304">6.3.4  2013-05-16</a></li>
<li><a class="reference internal" href="#id305">6.3.3  2013-05-13</a></li>
<li><a class="reference internal" href="#id306">6.3.2  2013-04-18</a></li>
<li><a class="reference internal" href="#id307">6.3.0  2013-04-05</a></li>
<li><a class="reference internal" href="#id308">6.2.5  2013-03-27</a></li>
<li><a class="reference internal" href="#id309">6.2.4  2013-03-21</a></li>
<li><a class="reference internal" href="#id310">6.2.3  2013-03-08</a></li>
<li><a class="reference internal" href="#id311">6.2.2  2013-02-25</a></li>
<li><a class="reference internal" href="#id312">6.2.1  2013-02-20</a></li>
<li><a class="reference internal" href="#id313">6.1.0  2013-01-30</a></li>
<li><a class="reference internal" href="#id314">6.0.6  2013-01-22</a></li>
<li><a class="reference internal" href="#id315">6.0.4  2012-12-18</a></li>
<li><a class="reference internal" href="#id316">6.0.3  2012-12-11</a></li>
<li><a class="reference internal" href="#id317">6.0.1  2012-11-26</a></li>
<li><a class="reference internal" href="#id318">6.0.0  2012-11-26</a></li>
<li><a class="reference internal" href="#id319">5.3.14  2012-11-20</a></li>
<li><a class="reference internal" href="#id320">5.3.13  2012-10-16</a></li>
<li><a class="reference internal" href="#id321">5.3.10  2012-09-06</a></li>
<li><a class="reference internal" href="#id322">5.3.7  2012-08-21</a></li>
<li><a class="reference internal" href="#id323">5.3.6  2012-07-26</a></li>
<li><a class="reference internal" href="#id324">5.3.0  2012-06-25</a></li>
<li><a class="reference internal" href="#id325">5.2.0  2012-06-14</a></li>
<li><a class="reference internal" href="#id326">5.1.2  2012-06-07</a></li>
<li><a class="reference internal" href="#id327">5.0.4  2012-06-01</a></li>
<li><a class="reference internal" href="#id328">4.0.1</a></li>
<li><a class="reference internal" href="#id329">3.0.0  2012-03-14</a></li>
<li><a class="reference internal" href="#id330">2.0.0  2012-02-27</a></li>
<li><a class="reference internal" href="#id331">1.12.13  2012-02-13</a></li>
<li><a class="reference internal" href="#id332">1.12.12  2012-01-24</a></li>
<li><a class="reference internal" href="#id333">1.12.9  2012-01-05</a></li>
<li><a class="reference internal" href="#id334">1.12.7  2011-12-02</a></li>
<li><a class="reference internal" href="#id335">1.12.6  2011-12-01</a></li>
<li><a class="reference internal" href="#id336">1.12.5  2011-11-29</a></li>
<li><a class="reference internal" href="#id337">1.12.4  2011-11-09</a></li>
<li><a class="reference internal" href="#id338">1.12.3  2011-11-08</a></li>
<li><a class="reference internal" href="#id339">1.12.2  2011-10-28</a></li>
<li><a class="reference internal" href="#id340">1.12.0  2011-10-21</a></li>
<li><a class="reference internal" href="#id341">1.11.9  2011-10-14</a></li>
<li><a class="reference internal" href="#id342">1.11.8  2011-10-04</a></li>
<li><a class="reference internal" href="#id343">1.11.7  2011-09-28</a></li>
<li><a class="reference internal" href="#id344">1.11.2  2011-08-12</a></li>
<li><a class="reference internal" href="#id345">1.11.1  2011-08-05</a></li>
<li><a class="reference internal" href="#id346">1.11.0  2011-08-02</a></li>
<li><a class="reference internal" href="#id347">1.10.4  2011-07-29</a></li>
<li><a class="reference internal" href="#id348">1.10.3  2011-07-27</a></li>
<li><a class="reference internal" href="#id349">1.10.2  2011-07-18</a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="util-validator/index.html" title="previous chapter">util-validator Guide</a></li>
  </ul></li>
</ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Search the contents of this site.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">&copy; Copyright 2024 Twitter, Inc.</div>
  
  </body>
</html>